graph TD
    A([Start: Initial Setup]) --> B{Select Policy: (Optimal Control Theory)};
    B -- Primary --> C{Assess Environment & Constraints};
    C -- Primary --> D{Define Objective Function};
    D -- Primary --> E{Formulate Hamiltonian};
    E -- Primary --> F{Solve Hamiltonian (∂f/∂q + p) = 0};
    F -- Primary --> G{Calculate Necessary Conditions};
    G -- Primary --> H{Evaluate Critical Points};
    H -- Primary --> I{Select Optimal Policy};
    I -- Primary --> J{Implement Policy};
    J --> K{Monitor & Adapt};
    K -- Feedback --> C;
    C -- Parallel --> D;
    H -- Optional --> I;
    I --> J;
    J --> K;
    K -- Feedback --> B{Re-evaluate Policy};
    B -- Optional --> E{Re-derive Hamiltonian};
    E -- Optional --> F;
    A --> K;