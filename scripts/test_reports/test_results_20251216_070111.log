============================= test session starts ==============================
platform darwin -- Python 3.13.11, pytest-8.4.2, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.13/bin/python3.13
cachedir: .pytest_cache
metadata: {'Python': '3.13.11', 'Platform': 'macOS-26.2-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.2', 'pluggy': '1.6.0'}, 'Plugins': {'mock': '3.15.1', 'asyncio': '1.2.0', 'jaxtyping': '0.3.3', 'anyio': '4.9.0', 'html': '4.1.1', 'xdist': '3.8.0', 'timeout': '2.4.0', 'metadata': '3.1.1', 'hypothesis': '6.138.15', 'benchmark': '5.1.0', 'cov': '7.0.0'}}
hypothesis profile 'default'
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/4d/Documents/GitHub/curriculum
configfile: pyproject.toml
testpaths: tests
plugins: mock-3.15.1, asyncio-1.2.0, jaxtyping-0.3.3, anyio-4.9.0, html-4.1.1, xdist-3.8.0, timeout-2.4.0, metadata-3.1.1, hypothesis-6.138.15, benchmark-5.1.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 658 items

tests/test_batch_processor.py::TestBatchCourseProcessor::test_init_with_valid_paths PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_init_without_project_root PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_list_available_courses PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_list_available_courses_empty PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_success PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_partial_failure PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_exception PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_success PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_with_skips PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_stage_failure PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_empty_list PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_generate_summary PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_run_script_with_course_flag PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_run_script_without_course_flag_for_other_scripts PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_okay_heres PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_alright PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_sure PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_would_you_like PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_let_me_know PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_multiple_artifacts PASSED [  3%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_no_artifacts PASSED [  3%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_case_insensitive PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_instructor_name PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_professor_name PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_month_format PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_slash_format PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_iso_format PASSED [  4%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_multiple_names_and_dates PASSED [  4%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_no_placeholders PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_valid_content PASSED    [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_conversational_artifacts PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_specific_names PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_specific_dates PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_validate_questions_with_answers PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_validate_questions_missing_answers PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_issue_examples_limited PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_full_cleanup_removes_artifacts PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_full_cleanup_standardizes_placeholders PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_validation_after_cleanup PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_cleanup_preserves_content PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_all_valid PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_with_issues PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_empty PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_different_content_types PASSED [  6%]
tests/test_cleanup.py::TestEdgeCases::test_empty_content PASSED          [  6%]
tests/test_cleanup.py::TestEdgeCases::test_whitespace_only PASSED        [  6%]
tests/test_cleanup.py::TestEdgeCases::test_very_long_content PASSED      [  7%]
tests/test_cleanup.py::TestEdgeCases::test_special_characters_preserved PASSED [  7%]
tests/test_cleanup.py::TestEdgeCases::test_unicode_content PASSED        [  7%]
tests/test_cleanup.py::TestBatchValidationAdvanced::test_batch_validation_mixed_results PASSED [  7%]
tests/test_cleanup.py::TestFullCleanupPipelineComprehensive::test_full_cleanup_pipeline_all_steps PASSED [  7%]
tests/test_cleanup.py::TestUnicodePreservation::test_unicode_preservation_in_cleanup PASSED [  7%]
tests/test_cleanup.py::TestLargeContentHandling::test_very_long_content_100kb PASSED [  8%]
tests/test_cleanup.py::TestWhitespaceEdgeCases::test_whitespace_only_content_cleanup PASSED [  8%]
tests/test_cleanup.py::TestWhitespaceEdgeCases::test_content_with_excessive_whitespace PASSED [  8%]
tests/test_cleanup.py::TestMultiplePlaceholders::test_multiple_placeholders_same_text PASSED [  8%]
tests/test_cleanup.py::TestCodeBlockPreservation::test_cleanup_preserves_code_blocks PASSED [  8%]
tests/test_cleanup.py::TestQuotedTextPreservation::test_cleanup_preserves_quotes PASSED [  8%]
tests/test_cleanup.py::TestValidationExtensibility::test_validation_different_content_types PASSED [  8%]
tests/test_cleanup.py::TestValidationExtensibility::test_validation_provides_actionable_feedback PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_with_mixed_line_endings PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_with_null_bytes PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_idempotency PASSED [  9%]
tests/test_cleanup.py::TestErrorHandlingInCleanup::test_cleanup_with_malformed_regex_patterns PASSED [  9%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_okay_i_understand PASSED [  9%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_i_have_carefully_adhered PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_the_output_following PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_the_response_adhering PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_i_trust_this_response PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_do_you_have_any_further PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_same_level PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_different_levels PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_case_insensitive PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_preserves_content PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_no_duplicate_headings_unchanged PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_duplicate_headings_in_full_cleanup PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_init_with_valid_path PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_init_with_invalid_path PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_load_course_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_load_llm_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_load_output_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_course_info PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_without_outline PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_without_outline PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_course_defaults PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_llm_parameters PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_prompt_template PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_prompt_template_not_found PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_output_paths PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_validate_course_config_valid PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_validate_course_config_missing_field PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_missing_config_file PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_find_latest_outline_json_explicit_path PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_find_latest_outline_json_not_found PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_from_outline_with_valid_json PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_from_outline_invalid_json PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_from_outline PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_from_outline_not_found PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_malformed_yaml_syntax_error PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_missing_llm_model_field PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_default_value_application PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_discovery_multiple_locations PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_discovery_prefers_recent PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_empty_json_outline PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_missing_required_fields PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_concurrent_config_loading PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_cache_invalidation PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_yaml_with_unicode PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_config_file_permissions_error PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_type_conversion PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_with_config PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_defaults PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_invalid_values PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_missing_output_config PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_basic PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_multiple_spaces PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_empty PASSED [ 17%]
tests/test_content_analysis.py::TestStructureCounting::test_count_sections PASSED [ 17%]
tests/test_content_analysis.py::TestStructureCounting::test_count_subsections PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_examples PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_definitions PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_cross_references PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_basic PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_warnings PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exact_min_word_count PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exact_max_word_count PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exceeds_max_word_count PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_missing_sections PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_too_many_sections PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_few_examples PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_too_many_examples PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_compliance_status PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_basic PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_warnings PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_no_safety_warnings PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_no_tables PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_few_procedure_steps PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_procedure_step_counting PASSED [ 20%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_actual_format PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_basic PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_real_content_sample PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_no_questions_warning PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_missing_answers PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_missing_explanations PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_multiple_formats PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_question_marks PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_no_question_marks PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_mc_structure_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_length_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_question_mark_ratio PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_mc_option_count_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_explanation_length_validation PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_basic PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_key_concept_formats PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_few_key_concepts PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_too_many_key_concepts PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_word_count_limit PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_bullet_point_structure PASSED [ 24%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_with_tables PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_markdown_section_hierarchy PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_cross_reference_detection PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_term_definition_detection PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_code_fences PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_commands PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_classdef_commands PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_multiple_style_commands PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_with_indentation PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_in_complex_diagram PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_checks_diagram_type PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_valid_diagram PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_node_count PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_connection_count PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_node_text_length PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_empty_nodes PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_code_fences PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_linkstyle PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_explanatory_text_after_diagram PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_explanatory_text_before_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_style_commands PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_preserves_valid_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_handles_complex_diagram_with_linkstyle PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_handles_empty_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_integration_with_validate PASSED [ 27%]
tests/test_content_analysis.py::TestApplicationAnalysis::test_analyze_application_basic PASSED [ 27%]
tests/test_content_analysis.py::TestApplicationAnalysis::test_analyze_application_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestExtensionAnalysis::test_analyze_extension_basic PASSED [ 28%]
tests/test_content_analysis.py::TestExtensionAnalysis::test_analyze_extension_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestVisualizationAnalysis::test_analyze_visualization_basic PASSED [ 28%]
tests/test_content_analysis.py::TestVisualizationAnalysis::test_analyze_visualization_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestIntegrationAnalysis::test_analyze_integration_basic PASSED [ 28%]
tests/test_content_analysis.py::TestIntegrationAnalysis::test_analyze_integration_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestInvestigationAnalysis::test_analyze_investigation_basic PASSED [ 29%]
tests/test_content_analysis.py::TestInvestigationAnalysis::test_analyze_investigation_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestOpenQuestionsAnalysis::test_analyze_open_questions_basic PASSED [ 29%]
tests/test_content_analysis.py::TestOpenQuestionsAnalysis::test_analyze_open_questions_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestContentMetricsLogging::test_log_lecture_metrics PASSED [ 29%]
tests/test_content_analysis.py::TestContentMetricsLogging::test_log_metrics_with_warnings PASSED [ 29%]
tests/test_content_generators.py::TestContentGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_generate_lecture PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_save_lecture PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_generate_diagram PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_save_diagram PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_init PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_save_questions PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions_pre_validation PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_diagram_retry_handles_validation PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions_retry_handles_validation PASSED [ 31%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_with_zero_courses PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_with_many_courses PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_keyboard_interrupt PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_invalid_input_recovery PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_empty_input_uses_default PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_out_of_range_input PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_negative_input PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_default_option PASSED [ 33%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_generate_all_option PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_init PASSED      [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_critical PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_warning PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_info PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_warning PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_all_issues_sorted PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_content_type PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_type PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_context PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_summary PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_clear PASSED     [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_to_dict PASSED   [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_bool PASSED      [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_len PASSED       [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_metadata PASSED  [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_large_error_collection PASSED [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_mixed_error_types PASSED [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_error_categorization_accuracy PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_summary_with_mixed_content_types PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_format_error_list_with_max_items PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_format_error_list_shows_context PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_critical_issues_extraction PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_warnings_extraction PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_empty_collector_summary PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_stage_summary_with_large_dataset PASSED [ 37%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_validation_summary_with_mixed_severities FAILED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_lecture_generator_empty_module_info PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_diagram_generator_empty_topic PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_question_generator_invalid_num_questions PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_lecture_save_creates_directory PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_diagram_save_with_special_chars PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_questions_save_unicode PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorValidation::test_lecture_generator_retry_on_validation_failure PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorValidation::test_diagram_generator_retry_on_invalid_mermaid PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_lecture_very_long_module_name PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_questions_empty_subtopics PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_diagram_unicode_topic PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorIntegration::test_all_generators_initialization PASSED [ 39%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorIntegration::test_generators_share_config PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_simple PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_with_suffix PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_special_chars PASSED [ 39%]
tests/test_helpers_extended.py::TestTimestampFormatting::test_format_timestamp_with_datetime PASSED [ 39%]
tests/test_helpers_extended.py::TestTimestampFormatting::test_format_timestamp_current PASSED [ 39%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_unicode PASSED [ 40%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_multiple_dots PASSED [ 40%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_empty_extension PASSED [ 40%]
tests/test_helpers_extended.py::TestSlugifyUnicode::test_slugify_unicode_to_ascii PASSED [ 40%]
tests/test_helpers_extended.py::TestSlugifyUnicode::test_slugify_mixed_unicode_ascii PASSED [ 40%]
tests/test_helpers_extended.py::TestErrorRecovery::test_load_markdown_corrupted_encoding PASSED [ 40%]
tests/test_helpers_extended.py::TestErrorRecovery::test_ensure_directory_with_file_conflict PASSED [ 41%]
tests/test_helpers_extended.py::TestTimezoneHandling::test_format_timestamp_timezone_aware PASSED [ 41%]
tests/test_helpers_extended.py::TestTimezoneHandling::test_format_timestamp_naive_datetime PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_markdown_code_block PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_plain_code_block PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_raw_response PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_embedded_in_text PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_with_nested_structure PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_finds_largest_object PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_course_metadata_keyword PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_modules_keyword PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_multiple_objects PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_invalid_json PASSED [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_malformed_json PASSED [ 43%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_whitespace PASSED [ 43%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_newlines_in_strings PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_find_latest_outline_json PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_find_outline_explicit_path PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_from_outline PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_module_by_id_from_outline PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_default_behavior PASSED [ 44%]
tests/test_json_outline_integration.py::test_config_loader_get_module_by_id_default_behavior PASSED [ 44%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_backward_compatibility PASSED [ 44%]
tests/test_json_outline_integration.py::test_outline_json_structure_validation PASSED [ 44%]
tests/test_json_outline_integration.py::test_no_outline_found_returns_empty_list PASSED [ 44%]
tests/test_json_outline_integration.py::test_invalid_json_returns_empty_list PASSED [ 44%]
tests/test_llm_client.py::TestOllamaClient::test_init_with_config PASSED [ 44%]
tests/test_llm_client.py::TestOllamaClient::test_init_with_defaults PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_simple_prompt PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_system_prompt PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_custom_temperature PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_simple PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_multiple_vars PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_missing_variable PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_template PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_generate_empty_prompt_handling PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_client_with_invalid_model PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_timeout_handling PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_custom_timeout_per_request PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_stream_timeout_tracking PASSED [ 46%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_special_chars PASSED [ 47%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_unicode PASSED [ 47%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_empty_string PASSED [ 47%]
tests/test_llm_client.py::TestStreamingAndChunking::test_streaming_response_handling PASSED [ 47%]
tests/test_llm_client.py::TestConnectionPooling::test_multiple_requests_same_client PASSED [ 47%]
tests/test_llm_client.py::TestAPICompatibility::test_api_version_compatibility PASSED [ 47%]
tests/test_llm_client.py::TestParameterValidation::test_parameter_merging PASSED [ 48%]
tests/test_llm_client.py::TestParameterValidation::test_invalid_parameter_handling PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_system_prompt_with_special_chars PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_system_prompt_unicode PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_empty_system_prompt PASSED [ 48%]
tests/test_llm_client.py::TestRequestIDTracing::test_request_id_generation PASSED [ 48%]
tests/test_llm_client.py::TestRequestIDTracing::test_request_id_in_all_logs PASSED [ 48%]
tests/test_llm_client.py::TestStreamProgressLogging::test_progress_logging_during_long_stream PASSED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_with_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_without_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_partial_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_error_message_includes_context PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_connection_error_message PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_timeout_error_message_includes_diagnostics PASSED [ 50%]
tests/test_llm_client.py::TestErrorMessages::test_stream_timeout_error_includes_chunks PASSED [ 50%]
tests/test_llm_client.py::TestHangingRequests::test_timeout_enforcement PASSED [ 50%]
tests/test_llm_client.py::TestHangingRequests::test_connection_timeout_vs_read_timeout PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_health_monitor_initialization PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_service_status_check PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_model_status_check PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_get_diagnostics PASSED [ 51%]
tests/test_llm_client.py::TestHealthMonitoring::test_troubleshooting_suggestions PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_handler_initialization PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_with_monitoring PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_cancellation PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_very_short_timeout PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_timeout_with_long_generation PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_timeout_override PASSED [ 52%]
tests/test_llm_client.py::TestOllamaUnavailable::test_unavailable_service PASSED [ 52%]
tests/test_llm_client.py::TestOllamaUnavailable::test_invalid_model PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_stream_timeout_tracking PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_empty_stream_handling PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_stream_progress_logging PASSED [ 52%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_adaptive_timeout_extension_on_progress PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_timeout_configuration_validation PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_operation_specific_timeout PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stream_progress_monitoring PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stuck_stream_detection PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_timeout_error_message_quality PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestRetryOnTimeout::test_retry_on_transient_timeout PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestRetryOnTimeout::test_max_retries_respected PASSED [ 54%]
tests/test_llm_client_timeouts.py::TestTimeoutConfiguration::test_timeout_override PASSED [ 54%]
tests/test_llm_client_timeouts.py::TestTimeoutConfiguration::test_very_long_timeout_warning PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_defaults PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_different_levels PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_console_only PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_file_only PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_custom_format PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_creates_directory PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_default_directory PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_clears_existing_handlers PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionHeader::test_log_section_header_major PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionHeader::test_log_section_header_minor PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionClean::test_log_section_clean_default_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogSectionClean::test_log_section_clean_custom_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_basic PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_custom_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_empty_dict PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_success PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_error PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_warning PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_info PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_check PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_default PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_basic PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_different_types PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_long_string PASSED [ 58%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_empty PASSED [ 58%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_custom_title PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_success PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_missing_vars PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_extra_vars PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_both_missing_and_extra PASSED [ 58%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_success PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_warning PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_error PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_info PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_numeric_formatting PASSED [ 59%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_valid_config PASSED [ 59%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_missing_config PASSED [ 60%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_exception PASSED [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_init PASSED  [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_generate_study_notes PASSED [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_save_study_notes PASSED [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_init PASSED         [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_generate_lab PASSED [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_generate_multiple_labs PASSED [ 61%]
tests/test_new_generators.py::TestLabGenerator::test_save_lab PASSED     [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_init PASSED  [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_generate_outline FAILED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_save_outline PASSED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_generate_and_save_outline PASSED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_structure PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_all_variables_passed_to_template PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_extract_json_malformed_responses PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_edge_cases PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_normalize_session_numbering PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_missing_session_fields PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_wrong_module_structure PASSED [ 62%]
tests/test_outline_generator_noninteractive.py::TestNonInteractiveMode::test_noninteractive_mode_defaults PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestNonInteractiveMode::test_session_distribution_calculation PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_zero PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_one PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_hundred PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_uneven_session_distribution PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestOutputStructure::test_json_output_structure_validation PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestOutputStructure::test_markdown_output_formatting PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestMetadataHandling::test_outline_metadata_completeness PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestMetadataHandling::test_timestamp_generation_format PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_session_rationale_generation PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_learning_objectives_count PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_key_concepts_count PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_subtopics_count PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestOutlineFileNaming::test_outline_filename_with_timestamp PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestOutlineFileNaming::test_outline_markdown_companion PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestConfigDefaults::test_sessions_per_module_auto_calculate PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestConfigDefaults::test_explicit_sessions_per_module PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestEdgeCaseHandling::test_module_name_with_special_characters PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestEdgeCaseHandling::test_unicode_in_course_content PASSED [ 65%]
tests/test_parser.py::TestOutlineParser::test_init PASSED                [ 66%]
tests/test_parser.py::TestOutlineParser::test_parse_modules PASSED       [ 66%]
tests/test_parser.py::TestOutlineParser::test_extract_metadata PASSED    [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_count PASSED    [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_by_index PASSED [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_by_index_invalid PASSED [ 66%]
tests/test_parser.py::TestOutlineParser::test_extract_subtopics PASSED   [ 67%]
tests/test_parser.py::TestOutlineParser::test_extract_objectives PASSED  [ 67%]
tests/test_parser.py::TestOutlineParser::test_parse_minimal_outline PASSED [ 67%]
tests/test_parser.py::TestOutlineParser::test_to_dict PASSED             [ 67%]
tests/test_parser.py::TestOutlineParser::test_empty_outline PASSED       [ 67%]
tests/test_parser.py::TestOutlineParser::test_outline_without_modules PASSED [ 67%]
tests/test_parser.py::TestOutlineParser::test_get_course_title PASSED    [ 67%]
tests/test_parser.py::TestOutlineParser::test_get_course_title_no_title PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_malformed_markdown_headers PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_missing_module_section PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_missing_metadata_section PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnexpectedContent::test_extra_unexpected_sections PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnexpectedContent::test_nested_bullet_points PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnicodeHandling::test_unicode_in_headers PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnicodeHandling::test_unicode_in_content PASSED [ 69%]
tests/test_parser_edge_cases.py::TestLargeOutlines::test_very_large_outline_50_modules PASSED [ 69%]
tests/test_parser_edge_cases.py::TestEmptyAndInvalid::test_empty_module_name PASSED [ 69%]
tests/test_parser_edge_cases.py::TestEmptyAndInvalid::test_duplicate_module_ids PASSED [ 69%]
tests/test_parser_edge_cases.py::TestListFormatting::test_malformed_bullet_lists PASSED [ 69%]
tests/test_parser_edge_cases.py::TestListFormatting::test_mixed_list_styles PASSED [ 69%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_code_blocks_in_content PASSED [ 70%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_links_in_content PASSED [ 70%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_special_characters_escaping PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_excessive_blank_lines PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_mixed_line_endings PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_tabs_vs_spaces_indentation PASSED [ 70%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_empty_outline PASSED [ 70%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_whitespace_only_outline PASSED [ 71%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_single_character_outline PASSED [ 71%]
tests/test_parser_edge_cases.py::TestContentExtraction::test_extract_subtopics_various_formats PASSED [ 71%]
tests/test_parser_edge_cases.py::TestContentExtraction::test_extract_with_inline_formatting PASSED [ 71%]
tests/test_parser_edge_cases.py::TestStructureValidation::test_modules_without_content PASSED [ 71%]
tests/test_parser_edge_cases.py::TestStructureValidation::test_content_before_first_module PASSED [ 71%]
tests/test_parser_edge_cases.py::TestRobustness::test_very_long_module_names PASSED [ 72%]
tests/test_parser_edge_cases.py::TestRobustness::test_special_unicode_ranges PASSED [ 72%]
tests/test_parser_edge_cases.py::TestRobustness::test_html_tags_in_markdown PASSED [ 72%]
tests/test_parser_edge_cases.py::TestErrorRecovery::test_recovery_from_malformed_section PASSED [ 72%]
tests/test_parser_edge_cases.py::TestErrorRecovery::test_mixed_valid_invalid_content PASSED [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_init PASSED           [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_setup_logging PASSED  [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_get_output_directories PASSED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage1_generate_outline FAILED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_run_full_pipeline FAILED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_generate_content_multiple_modules SKIPPEDCheck logs for details.) [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_with_module_filtering SKIPPEDCheck logs for details.) [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_content_structure SKIPPEDCheck logs for details.) [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_with_invalid_outline PASSED [ 74%]
tests/test_pipeline.py::TestContentGenerator::test_pipeline_progress_tracking SKIPPEDCheck logs for details.) [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_multi_module_generation_all_succeed PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_empty_module_list PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_very_large_module_count PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_json_outline_missing_file PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_json_outline_invalid_structure PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_corrupted_json_file PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineModuleFiltering::test_module_filtering_specific_ids PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineModuleFiltering::test_module_filtering_invalid_ids PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineOutputDiscovery::test_output_directory_discovery_priority PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineOutputDiscovery::test_no_outline_in_any_location PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_outline_with_no_sessions PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_module_with_many_sessions PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_outline_with_special_characters_in_names PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_module_id_gaps PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineValidation::test_output_validation_structure PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineValidation::test_outline_metadata_validation PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineFileOperations::test_multiple_outlines_select_most_recent PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineFileOperations::test_outline_in_nested_directory PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineDataIntegrity::test_module_data_preservation PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineDataIntegrity::test_unicode_in_module_names_and_content PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelinePerformance::test_large_outline_loading_performance PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelinePerformance::test_concurrent_outline_access PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineLogging::test_pipeline_logs_outline_discovery PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineNullHandling::test_module_with_null_fields PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineNullHandling::test_explicit_none_path PASSED [ 77%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_full_pipeline_stage1_to_stage2 FAILED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_error_recovery PASSED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_module_filtering FAILED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_output_structure FAILED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_transient_error_detection PASSED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_resume_capability_skip_existing PASSED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_error_categorization PASSED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_retry_generation_helper PASSED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_retry_on_transient_failure PASSED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_no_retry_on_permanent_failure PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_categorize_errors_by_type PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_format_error_list PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_format_error_list_max_items PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_validation_summary FAILED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_success FAILED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_with_issues PASSED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_generation_summary PASSED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_no_items FAILED [ 80%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_no_courses PASSED [ 80%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_with_courses PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_default PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_generate_all PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_invalid_input PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_keyboard_interrupt PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_lecture PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_study_notes PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_questions PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_generic PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_categorize_warnings PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_categorize_warnings_empty PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_no_warnings PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_questions PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_study_notes PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_lecture PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_valid PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_invalid_min_max PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_multiple_issues PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_specific_types PASSED [ 83%]
tests/test_utils.py::TestUtils::test_ensure_directory_creates_new PASSED [ 83%]
tests/test_utils.py::TestUtils::test_ensure_directory_existing PASSED    [ 84%]
tests/test_utils.py::TestUtils::test_slugify_simple PASSED               [ 84%]
tests/test_utils.py::TestUtils::test_slugify_special_chars PASSED        [ 84%]
tests/test_utils.py::TestUtils::test_slugify_multiple_spaces PASSED      [ 84%]
tests/test_utils.py::TestUtils::test_slugify_numbers PASSED              [ 84%]
tests/test_utils.py::TestUtils::test_save_and_load_markdown PASSED       [ 84%]
tests/test_utils.py::TestUtils::test_save_markdown_creates_dirs PASSED   [ 84%]
tests/test_utils.py::TestUtils::test_load_markdown_nonexistent PASSED    [ 85%]
tests/test_utils.py::TestUtils::test_format_timestamp PASSED             [ 85%]
tests/test_utils.py::TestUtils::test_format_timestamp_current PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_simple PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_special_chars PASSED [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_spaces PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_preserves_extension PASSED [ 86%]
tests/test_utils.py::TestUtils::test_file_operation_permission_error PASSED [ 86%]
tests/test_utils.py::TestUtils::test_sanitize_path_traversal PASSED      [ 86%]
tests/test_utils.py::TestUtils::test_ensure_directory_race_condition PASSED [ 86%]
tests/test_utils.py::TestUtils::test_save_markdown_with_encoding PASSED  [ 86%]
tests/test_utils.py::TestUtils::test_slugify_very_long_strings PASSED    [ 86%]
tests/test_website_content_loader.py::TestContentLoader::test_get_content_types PASSED [ 86%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_valid_structure PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_missing_sessions PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_partial_content PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_nonexistent_directory PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_multiple_sessions PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_diagram_discovery PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_no_diagrams PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_secondary_types PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_visualization_is_mmd PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_valid_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_nonexistent_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_with_unicode PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_valid_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_nonexistent_file PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_with_special_chars PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_sorted_sessions PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_ignores_non_session_dirs PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_init_with_config_loader PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_with_custom_outline_and_output PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_auto_discovers_outline PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_raises_file_not_found_no_outline PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_raises_value_error_empty_modules PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_handles_missing_content_files PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_content PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_missing_sessions PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_partial_content PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_diagrams PASSED [ 91%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_secondary_content PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_returns_string PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_modules_data PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_mermaid_init PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_highlight_init PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_search_functionality PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_dark_mode PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_progress_tracking PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_content_loading PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_toc_generation PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_breadcrumbs PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_keyboard_navigation PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_handles_empty_modules PASSED [ 93%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_handles_complex_modules PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_module_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_session_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_event_delegation_uses_sidebar PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_handler_checks_first PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_event_propagation_stopped PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_validation PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_load_content_function_present PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_unified_event_handler_structure PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_button_target_checking PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_active_class_management PASSED [ 94%]
tests/test_website_styles.py::TestStyles::test_get_css_returns_string PASSED [ 94%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_css_variables PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_dark_mode PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_responsive_design PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_print_styles PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_key_classes PASSED [ 95%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_basic PASSED [ 95%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_code_blocks PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_tables PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_lists PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_ordered_lists PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_graceful_fallback PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_standard_entities PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_quotes PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_empty_string PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_escape_html_special_characters PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_complete_structure PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_embedded_css PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_embedded_javascript PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_modules_serialization PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_course_metadata PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_html_with_timestamp PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_html_without_timestamp PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_single_module PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_multiple_modules PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_content_type_detection PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_hides_missing_content PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_diagram_buttons PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_secondary_content PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_aria_attributes PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_escape_html_preserves_text PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_headers PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_links PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_html_empty_modules PASSED [100%]

=================================== FAILURES ===================================
__ TestErrorCollectorEdgeCases.test_validation_summary_with_mixed_severities ___
tests/test_error_collector_edge_cases.py:223: in test_validation_summary_with_mixed_severities
    assert "[VALIDATION SUMMARY]" in all_log_text
E   AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Error 0\nWARNING  test:summary_generator.py:115     2. Error 3\nWARNING  test:summary_generator.py:115     3. Error 6\nWARNING  test:summary_generator.py:115     4. Error 9\n'
------------------------------ Captured log call -------------------------------
WARNING  test:summary_generator.py:115     1. Error 0
WARNING  test:summary_generator.py:115     2. Error 3
WARNING  test:summary_generator.py:115     3. Error 6
WARNING  test:summary_generator.py:115     4. Error 9
__________________ TestOutlineGenerator.test_generate_outline __________________
tests/test_outline_generator.py:184: in test_generate_outline
    outline = generator.generate_outline(
src/generate/stages/stage1_outline.py:648: in generate_outline
    raise ValueError("Generated outline JSON failed validation. Check logs for details.")
E   ValueError: Generated outline JSON failed validation. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 06:59:32,162 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_generate_outline0/config
2025-12-16 06:59:32,164 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_generate_outline0/config
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:59:33,446 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 06:59:33,446 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,446 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:33,446 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:33,450 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:33,451 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:59:33,452 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:33,453 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:33,453 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:33,453 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:33,453 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:33,453 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:33,455 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:33,455 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:33,469 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:33,470 - src.llm.client - INFO - [out:d3a8cb]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:59:33,470 - src.llm.client - INFO - [out:d3a8cb] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:33,470 - src.llm.client - INFO - [out:d3a8cb] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:33,472 - src.llm.client - INFO - [out:d3a8cb] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:59:33,472 - src.llm.client - INFO - [out:d3a8cb] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:34,229 - src.llm.request_handler - INFO - [out:d3a8cb]  Done 0.76s
2025-12-16 06:59:34,229 - src.llm.client - INFO - [out:d3a8cb]  HTTP 200 in 0.76s
2025-12-16 06:59:34,229 - src.llm.client - INFO - [out:d3a8cb]  Stream active (200)
2025-12-16 06:59:34,229 - src.llm.client - INFO - [out:d3a8cb] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:35,054 - src.llm.client - INFO - [out:d3a8cb]  Done 1.58s: 137c (~14w @86c/s)
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - Generation took 1.58 seconds
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - Generation rate: 86.5 chars/s
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.58s (within expected range)
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:35,054 - tests.test_outline_generator - WARNING - Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:59:35,054 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,055 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:35,056 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:35,057 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:35,058 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:35,059 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:35,060 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:35,060 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:35,075 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:35,075 - src.llm.client - INFO - [out:fc8f1a]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:59:35,075 - src.llm.client - INFO - [out:fc8f1a] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:35,075 - src.llm.client - INFO - [out:fc8f1a] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:35,077 - src.llm.client - INFO - [out:fc8f1a] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:59:35,077 - src.llm.client - INFO - [out:fc8f1a] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:35,321 - src.llm.request_handler - INFO - [out:fc8f1a]  Done 0.24s
2025-12-16 06:59:35,321 - src.llm.client - INFO - [out:fc8f1a]  HTTP 200 in 0.24s
2025-12-16 06:59:35,321 - src.llm.client - INFO - [out:fc8f1a]  Stream active (200)
2025-12-16 06:59:35,321 - src.llm.client - INFO - [out:fc8f1a] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:36,126 - src.llm.client - INFO - [out:fc8f1a]  Done 1.05s: 137c (~14w @130c/s)
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Generation took 1.05 seconds
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Generation rate: 130.3 chars/s
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.05s (within expected range)
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:36,127 - tests.test_outline_generator - WARNING - Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:36,127 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,128 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:36,129 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:36,130 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:36,131 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:36,133 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:36,134 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:36,150 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:36,150 - src.llm.client - INFO - [out:ed6d9f]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:59:36,150 - src.llm.client - INFO - [out:ed6d9f] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:36,150 - src.llm.client - INFO - [out:ed6d9f] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:36,153 - src.llm.client - INFO - [out:ed6d9f] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:59:36,153 - src.llm.client - INFO - [out:ed6d9f] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:36,416 - src.llm.request_handler - INFO - [out:ed6d9f]  Done 0.26s
2025-12-16 06:59:36,417 - src.llm.client - INFO - [out:ed6d9f]  HTTP 200 in 0.26s
2025-12-16 06:59:36,417 - src.llm.client - INFO - [out:ed6d9f]  Stream active (200)
2025-12-16 06:59:36,417 - src.llm.client - INFO - [out:ed6d9f] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:36,481 - src.llm.client - INFO - [out:ed6d9f]  Done 0.33s: 2c (~1w @6c/s)
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 2 characters)
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - Generation took 0.33 seconds
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - Generation rate: 6.0 chars/s
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - Generation performance: 0.33s (within expected range)
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:36,481 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:36,481 - tests.test_outline_generator - ERROR - Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
------------------------------ Captured log call -------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:d3a8cb]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:d3a8cb] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:d3a8cb] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:d3a8cb] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:d3a8cb] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:d3a8cb]  Done 0.76s
INFO     src.llm.client:client.py:305 [out:d3a8cb]  HTTP 200 in 0.76s
INFO     src.llm.client:client.py:339 [out:d3a8cb]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:d3a8cb] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:d3a8cb]  Done 1.58s: 137c (~14w @86c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.58 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 86.5 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.58s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:235 Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:fc8f1a]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:fc8f1a] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:fc8f1a] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:fc8f1a] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:fc8f1a] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:fc8f1a]  Done 0.24s
INFO     src.llm.client:client.py:305 [out:fc8f1a]  HTTP 200 in 0.24s
INFO     src.llm.client:client.py:339 [out:fc8f1a]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:fc8f1a] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:fc8f1a]  Done 1.05s: 137c (~14w @130c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.05 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 130.3 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.05s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:235 Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:ed6d9f]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:ed6d9f] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:ed6d9f] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:ed6d9f] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:ed6d9f] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:ed6d9f]  Done 0.26s
INFO     src.llm.client:client.py:305 [out:ed6d9f]  HTTP 200 in 0.26s
INFO     src.llm.client:client.py:339 [out:ed6d9f]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:ed6d9f] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:ed6d9f]  Done 0.33s: 2c (~1w @6c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 2 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 0.33 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 6.0 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 0.33s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
ERROR    tests.test_outline_generator:test_outline_generator.py:231 Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
______________ TestContentGenerator.test_stage1_generate_outline _______________
tests/test_pipeline.py:208: in test_stage1_generate_outline
    outline_path = generator.stage1_generate_outline(
src/generate/orchestration/pipeline.py:367: in stage1_generate_outline
    outline = self.outline_generator.generate_outline(
src/generate/stages/stage1_outline.py:648: in generate_outline
    raise ValueError("Generated outline JSON failed validation. Check logs for details.")
E   ValueError: Generated outline JSON failed validation. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 06:59:49,392 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/config
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/config
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:59:50,473 - src.generate.orchestration.pipeline - INFO - Initializing Educational Course Generator pipeline...
2025-12-16 06:59:50,479 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
2025-12-16 06:59:50,479 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 06:59:50,479 - src.generate.orchestration.pipeline - INFO - Pipeline initialized successfully
2025-12-16 06:59:50,479 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:50,479 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 06:59:50,479 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:50,480 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 06:59:50,480 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
2025-12-16 06:59:50,480 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 06:59:50,480 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Description: 23 characters
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:50,480 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:50,481 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course description"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    subject                 : "Biology"
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:50,482 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1474 characters
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - System prompt size: 51 characters
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:50,483 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:50,484 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:50,484 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:50,484 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:50,484 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:50,486 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:50,486 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:50,501 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:50,501 - src.llm.client - INFO - [out:5e9b74]  out | m=gemma3:4b | p=1474c | t=60s
2025-12-16 06:59:50,501 - src.llm.client - INFO - [out:5e9b74] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:50,501 - src.llm.client - INFO - [out:5e9b74] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:50,503 - src.llm.client - INFO - [out:5e9b74] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
2025-12-16 06:59:50,504 - src.llm.client - INFO - [out:5e9b74] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:51,209 - src.llm.request_handler - INFO - [out:5e9b74]  Done 0.71s
2025-12-16 06:59:51,209 - src.llm.client - INFO - [out:5e9b74]  HTTP 200 in 0.71s
2025-12-16 06:59:51,209 - src.llm.client - INFO - [out:5e9b74]  Stream active (200)
2025-12-16 06:59:51,209 - src.llm.client - INFO - [out:5e9b74] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:52,042 - src.llm.client - INFO - [out:5e9b74]  Done 1.54s: 137c (~14w @89c/s)
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - Generation took 1.54 seconds
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - Generation rate: 88.9 chars/s
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.54s (within expected range)
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:52,043 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:52,043 - tests.test_pipeline - WARNING - Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:59:52,043 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:52,043 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 06:59:52,043 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:52,044 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 06:59:52,044 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
2025-12-16 06:59:52,044 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 06:59:52,044 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Description: 23 characters
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:52,044 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course description"
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:52,045 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    subject                 : "Biology"
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1474 characters
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - System prompt size: 51 characters
2025-12-16 06:59:52,046 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:52,047 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:52,047 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:52,047 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:52,047 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:52,047 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:52,049 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:52,049 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:52,063 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:52,063 - src.llm.client - INFO - [out:de9663]  out | m=gemma3:4b | p=1474c | t=60s
2025-12-16 06:59:52,063 - src.llm.client - INFO - [out:de9663] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:52,063 - src.llm.client - INFO - [out:de9663] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:52,065 - src.llm.client - INFO - [out:de9663] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
2025-12-16 06:59:52,066 - src.llm.client - INFO - [out:de9663] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:52,307 - src.llm.request_handler - INFO - [out:de9663]  Done 0.24s
2025-12-16 06:59:52,308 - src.llm.client - INFO - [out:de9663]  HTTP 200 in 0.24s
2025-12-16 06:59:52,308 - src.llm.client - INFO - [out:de9663]  Stream active (200)
2025-12-16 06:59:52,308 - src.llm.client - INFO - [out:de9663] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:53,118 - src.llm.client - INFO - [out:de9663]  Done 1.05s: 137c (~14w @130c/s)
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - Generation took 1.05 seconds
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - Generation rate: 129.9 chars/s
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.05s (within expected range)
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:53,118 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:53,118 - tests.test_pipeline - WARNING - Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:59:53,118 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:53,118 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 06:59:53,118 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:53,119 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 06:59:53,119 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
2025-12-16 06:59:53,119 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 06:59:53,119 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Description: 23 characters
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:53,119 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:53,120 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course description"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    subject                 : "Biology"
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:53,121 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1474 characters
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - System prompt size: 51 characters
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:53,122 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:53,124 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:53,124 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:53,154 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:53,155 - src.llm.client - INFO - [out:52485e]  out | m=gemma3:4b | p=1474c | t=60s
2025-12-16 06:59:53,155 - src.llm.client - INFO - [out:52485e] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:53,155 - src.llm.client - INFO - [out:52485e] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:53,157 - src.llm.client - INFO - [out:52485e] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
2025-12-16 06:59:53,158 - src.llm.client - INFO - [out:52485e] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:53,399 - src.llm.request_handler - INFO - [out:52485e]  Done 0.24s
2025-12-16 06:59:53,399 - src.llm.client - INFO - [out:52485e]  HTTP 200 in 0.24s
2025-12-16 06:59:53,400 - src.llm.client - INFO - [out:52485e]  Stream active (200)
2025-12-16 06:59:53,400 - src.llm.client - INFO - [out:52485e] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:54,219 - src.llm.client - INFO - [out:52485e]  Done 1.06s: 137c (~14w @129c/s)
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - Generation took 1.06 seconds
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - Generation rate: 128.6 chars/s
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.06s (within expected range)
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:54,220 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:54,220 - tests.test_pipeline - ERROR - Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
------------------------------ Captured log call -------------------------------
INFO     src.generate.orchestration.pipeline:pipeline.py:66 Initializing Educational Course Generator pipeline...
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.orchestration.pipeline:pipeline.py:81 Pipeline initialized successfully
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 23 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course description"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1474 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 51 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:5e9b74]  out | m=gemma3:4b | p=1474c | t=60s
INFO     src.llm.client:client.py:244 [out:5e9b74] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:5e9b74] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:5e9b74] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
INFO     src.llm.client:client.py:283 [out:5e9b74] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:5e9b74]  Done 0.71s
INFO     src.llm.client:client.py:305 [out:5e9b74]  HTTP 200 in 0.71s
INFO     src.llm.client:client.py:339 [out:5e9b74]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:5e9b74] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:5e9b74]  Done 1.54s: 137c (~14w @89c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.54 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 88.9 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.54s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_pipeline:test_pipeline.py:251 Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 23 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course description"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1474 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 51 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:de9663]  out | m=gemma3:4b | p=1474c | t=60s
INFO     src.llm.client:client.py:244 [out:de9663] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:de9663] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:de9663] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
INFO     src.llm.client:client.py:283 [out:de9663] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:de9663]  Done 0.24s
INFO     src.llm.client:client.py:305 [out:de9663]  HTTP 200 in 0.24s
INFO     src.llm.client:client.py:339 [out:de9663]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:de9663] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:de9663]  Done 1.05s: 137c (~14w @130c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.05 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 129.9 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.05s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_pipeline:test_pipeline.py:251 Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_stage1_generate_outline0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 23 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course description"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1474 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 51 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:52485e]  out | m=gemma3:4b | p=1474c | t=60s
INFO     src.llm.client:client.py:244 [out:52485e] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:52485e] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:52485e] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
INFO     src.llm.client:client.py:283 [out:52485e] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:52485e]  Done 0.24s
INFO     src.llm.client:client.py:305 [out:52485e]  HTTP 200 in 0.24s
INFO     src.llm.client:client.py:339 [out:52485e]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:52485e] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:52485e]  Done 1.06s: 137c (~14w @129c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.06 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 128.6 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.06s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
ERROR    tests.test_pipeline:test_pipeline.py:247 Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
_________________ TestContentGenerator.test_run_full_pipeline __________________
tests/test_pipeline.py:276: in test_run_full_pipeline
    outline_path = generator.stage1_generate_outline(
src/generate/orchestration/pipeline.py:367: in stage1_generate_outline
    outline = self.outline_generator.generate_outline(
src/generate/stages/stage1_outline.py:648: in generate_outline
    raise ValueError("Generated outline JSON failed validation. Check logs for details.")
E   ValueError: Generated outline JSON failed validation. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 06:59:54,258 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/config
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/config
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:59:55,239 - src.generate.orchestration.pipeline - INFO - Initializing Educational Course Generator pipeline...
2025-12-16 06:59:55,245 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
2025-12-16 06:59:55,245 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 06:59:55,245 - src.generate.orchestration.pipeline - INFO - Pipeline initialized successfully
2025-12-16 06:59:55,245 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:55,245 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 06:59:55,245 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:55,246 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 06:59:55,246 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/output/outlines
2025-12-16 06:59:55,246 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 06:59:55,246 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Description: 23 characters
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:55,246 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:55,247 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course description"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    subject                 : "Biology"
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:55,248 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1474 characters
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - System prompt size: 51 characters
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:55,249 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:55,250 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:55,250 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:55,252 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:59:55,252 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:55,266 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:55,266 - src.llm.client - INFO - [out:8acac3]  out | m=gemma3:4b | p=1474c | t=60s
2025-12-16 06:59:55,266 - src.llm.client - INFO - [out:8acac3] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:55,266 - src.llm.client - INFO - [out:8acac3] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:55,269 - src.llm.client - INFO - [out:8acac3] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
2025-12-16 06:59:55,269 - src.llm.client - INFO - [out:8acac3] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:55,977 - src.llm.request_handler - INFO - [out:8acac3]  Done 0.71s
2025-12-16 06:59:55,977 - src.llm.client - INFO - [out:8acac3]  HTTP 200 in 0.71s
2025-12-16 06:59:55,977 - src.llm.client - INFO - [out:8acac3]  Stream active (200)
2025-12-16 06:59:55,977 - src.llm.client - INFO - [out:8acac3] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:56,796 - src.llm.client - INFO - [out:8acac3]  Done 1.53s: 137c (~14w @90c/s)
2025-12-16 06:59:56,796 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:56,796 - src.generate.stages.stage1_outline - INFO - Generation took 1.53 seconds
2025-12-16 06:59:56,796 - src.generate.stages.stage1_outline - INFO - Generation rate: 89.5 chars/s
2025-12-16 06:59:56,796 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.53s (within expected range)
2025-12-16 06:59:56,796 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:56,797 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:56,797 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:56,797 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:56,797 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:56,797 - tests.test_pipeline - WARNING - Stage 1 attempt 1/2 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:59:56,797 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:56,797 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 06:59:56,797 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 06:59:56,797 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 06:59:56,797 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/output/outlines
2025-12-16 06:59:56,797 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 06:59:56,797 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 06:59:56,797 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Description: 23 characters
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:59:56,798 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course description"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    subject                 : "Biology"
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:59:56,799 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1474 characters
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - System prompt size: 51 characters
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:59:56,800 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:59:56,802 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.001s)
2025-12-16 06:59:56,802 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:59:56,814 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:59:56,814 - src.llm.client - INFO - [out:3ecf33]  out | m=gemma3:4b | p=1474c | t=60s
2025-12-16 06:59:56,814 - src.llm.client - INFO - [out:3ecf33] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:59:56,814 - src.llm.client - INFO - [out:3ecf33] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:59:56,817 - src.llm.client - INFO - [out:3ecf33] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
2025-12-16 06:59:56,817 - src.llm.client - INFO - [out:3ecf33] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:59:57,051 - src.llm.request_handler - INFO - [out:3ecf33]  Done 0.23s
2025-12-16 06:59:57,051 - src.llm.client - INFO - [out:3ecf33]  HTTP 200 in 0.23s
2025-12-16 06:59:57,052 - src.llm.client - INFO - [out:3ecf33]  Stream active (200)
2025-12-16 06:59:57,052 - src.llm.client - INFO - [out:3ecf33] Starting stream parsing, waiting for first chunk...
2025-12-16 06:59:57,887 - src.llm.client - INFO - [out:3ecf33]  Done 1.07s: 137c (~14w @128c/s)
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - Generation took 1.07 seconds
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - Generation rate: 127.7 chars/s
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.07s (within expected range)
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:59:57,887 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:59:57,888 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:59:57,888 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:59:57,888 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:59:57,888 - tests.test_pipeline - ERROR - Stage 1 failed after 2 attempts: Generated outline JSON failed validation. Check logs for details.
------------------------------ Captured log call -------------------------------
INFO     src.generate.orchestration.pipeline:pipeline.py:66 Initializing Educational Course Generator pipeline...
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.orchestration.pipeline:pipeline.py:81 Pipeline initialized successfully
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 23 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course description"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1474 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 51 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:8acac3]  out | m=gemma3:4b | p=1474c | t=60s
INFO     src.llm.client:client.py:244 [out:8acac3] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:8acac3] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:8acac3] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
INFO     src.llm.client:client.py:283 [out:8acac3] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:8acac3]  Done 0.71s
INFO     src.llm.client:client.py:305 [out:8acac3]  HTTP 200 in 0.71s
INFO     src.llm.client:client.py:339 [out:8acac3]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:8acac3] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:8acac3]  Done 1.53s: 137c (~14w @90c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.53 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 89.5 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.53s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_pipeline:test_pipeline.py:304 Stage 1 attempt 1/2 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_run_full_pipeline0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 23 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course description"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1474 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 51 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.001s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:3ecf33]  out | m=gemma3:4b | p=1474c | t=60s
INFO     src.llm.client:client.py:244 [out:3ecf33] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:3ecf33] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:3ecf33] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1771 bytes, prompt=1474 chars
INFO     src.llm.client:client.py:283 [out:3ecf33] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:3ecf33]  Done 0.23s
INFO     src.llm.client:client.py:305 [out:3ecf33]  HTTP 200 in 0.23s
INFO     src.llm.client:client.py:339 [out:3ecf33]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:3ecf33] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:3ecf33]  Done 1.07s: 137c (~14w @128c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.07 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 127.7 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.07s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
ERROR    tests.test_pipeline:test_pipeline.py:301 Stage 1 failed after 2 attempts: Generated outline JSON failed validation. Check logs for details.
_________ TestPipelineIntegration.test_full_pipeline_stage1_to_stage2 __________
tests/test_pipeline_integration.py:88: in test_full_pipeline_stage1_to_stage2
    outline_path = generator.stage1_generate_outline(num_modules=2, total_sessions=4)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/generate/orchestration/pipeline.py:367: in stage1_generate_outline
    outline = self.outline_generator.generate_outline(
src/generate/stages/stage1_outline.py:641: in generate_outline
    raise ValueError("LLM did not return valid JSON. Check logs for details.")
E   ValueError: LLM did not return valid JSON. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 07:00:14,627 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_full_pipeline_stage1_to_s0/config
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_full_pipeline_stage1_to_s0/config
----------------------------- Captured stdout call -----------------------------
2025-12-16 07:00:15,985 - src.generate.orchestration.pipeline - INFO - Initializing Educational Course Generator pipeline...
2025-12-16 07:00:15,987 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
2025-12-16 07:00:15,987 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 07:00:15,987 - src.generate.orchestration.pipeline - INFO - Pipeline initialized successfully
2025-12-16 07:00:15,988 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:15,988 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 07:00:15,988 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:15,988 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 07:00:15,988 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_full_pipeline_stage1_to_s0/output/outlines
2025-12-16 07:00:15,988 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 07:00:15,988 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,988 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator....'
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "None specified"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 07:00:15,989 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - INFO -    All 1 required variables provided
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -     Extra 15 variables provided (will be ignored):
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - additional_constraints
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - avg_sessions_per_module
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - course_description
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - course_duration
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - course_level
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 07:00:15,990 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - WARNING -       - num_modules
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - WARNING -       - subject
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - WARNING -       - total_sessions
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 31 characters
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - System prompt size: 27 characters
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 07:00:15,991 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 07:00:15,993 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 07:00:15,993 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 07:00:16,007 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 07:00:16,008 - src.llm.client - INFO - [out:0f2fbc]  out | m=gemma3:4b | p=31c | t=60s
2025-12-16 07:00:16,008 - src.llm.client - INFO - [out:0f2fbc] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 07:00:16,008 - src.llm.client - INFO - [out:0f2fbc] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 07:00:16,010 - src.llm.client - INFO - [out:0f2fbc] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
2025-12-16 07:00:16,010 - src.llm.client - INFO - [out:0f2fbc] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 07:00:16,172 - src.llm.request_handler - INFO - [out:0f2fbc]  Done 0.16s
2025-12-16 07:00:16,173 - src.llm.client - INFO - [out:0f2fbc]  HTTP 200 in 0.16s
2025-12-16 07:00:16,173 - src.llm.client - INFO - [out:0f2fbc]  Stream active (200)
2025-12-16 07:00:16,173 - src.llm.client - INFO - [out:0f2fbc] Starting stream parsing, waiting for first chunk...
2025-12-16 07:00:18,177 - src.llm.client - INFO - [out:0f2fbc]  2.0s: 527c @263c/s (139ch, ~132t @66t/s)
2025-12-16 07:00:20,181 - src.llm.client - INFO - [out:0f2fbc]  4.0s: 948c @237c/s (256ch, ~237t @59t/s)
2025-12-16 07:00:22,189 - src.llm.client - INFO - [out:0f2fbc]  6.0s: 1366c @227c/s (378ch, ~342t @57t/s)
2025-12-16 07:00:24,195 - src.llm.client - INFO - [out:0f2fbc]  8.0s: 1699c @212c/s (486ch, ~425t @53t/s)
2025-12-16 07:00:26,201 - src.llm.client - INFO - [out:0f2fbc]  10.0s: 2217c @221c/s (621ch, ~554t @55t/s)
2025-12-16 07:00:28,214 - src.llm.client - INFO - [out:0f2fbc]  12.0s: 2672c @222c/s (749ch, ~668t @55t/s)
2025-12-16 07:00:30,222 - src.llm.client - INFO - [out:0f2fbc]  14.0s: 3217c @229c/s (881ch, ~804t @57t/s)
2025-12-16 07:00:32,236 - src.llm.client - INFO - [out:0f2fbc]  16.1s: 3786c @236c/s (1013ch, ~946t @59t/s)
2025-12-16 07:00:32,660 - src.llm.client - INFO - [out:0f2fbc]  Done 16.65s: 3894c (~538w @234c/s)
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 3894 characters)
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - Generation took 16.65 seconds
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - Generation rate: 233.8 chars/s
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - Generation performance: 16.65s (within expected range)
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:00:32,661 - src.generate.stages.stage1_outline - ERROR - Raw response preview: Okay, let's build an outline for a "Test Biology" exam. This outline is designed to be adaptable, so I'll provide a tiered structure with suggested topics and difficulty levels. You can adjust it based on the specific course level (high school, introductory college, etc.) and the weight of each topic.

**I. Cell Biology (20-30% of Exam)**

*   **A. Basic Cell Structure & Function (4-6%)**
    *   1.  Prokaryotic vs. Eukaryotic Cells  Key Differences (Focus)
    *   2.  Animal vs. Plant Cells  ...
------------------------------ Captured log call -------------------------------
INFO     src.generate.orchestration.pipeline:pipeline.py:66 Initializing Educational Course Generator pipeline...
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.orchestration.pipeline:pipeline.py:81 Pipeline initialized successfully
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_full_pipeline_stage1_to_s0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "None specified"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 1 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 15 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - additional_constraints
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - avg_sessions_per_module
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_description
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_duration
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_level
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - num_modules
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - subject
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - total_sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 31 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 27 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:0f2fbc]  out | m=gemma3:4b | p=31c | t=60s
INFO     src.llm.client:client.py:244 [out:0f2fbc] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:0f2fbc] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:0f2fbc] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
INFO     src.llm.client:client.py:283 [out:0f2fbc] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:0f2fbc]  Done 0.16s
INFO     src.llm.client:client.py:305 [out:0f2fbc]  HTTP 200 in 0.16s
INFO     src.llm.client:client.py:339 [out:0f2fbc]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:0f2fbc] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:638 [out:0f2fbc]  2.0s: 527c @263c/s (139ch, ~132t @66t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  4.0s: 948c @237c/s (256ch, ~237t @59t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  6.0s: 1366c @227c/s (378ch, ~342t @57t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  8.0s: 1699c @212c/s (486ch, ~425t @53t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  10.0s: 2217c @221c/s (621ch, ~554t @55t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  12.0s: 2672c @222c/s (749ch, ~668t @55t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  14.0s: 3217c @229c/s (881ch, ~804t @57t/s)
INFO     src.llm.client:client.py:638 [out:0f2fbc]  16.1s: 3786c @236c/s (1013ch, ~946t @59t/s)
INFO     src.llm.client:client.py:364 [out:0f2fbc]  Done 16.65s: 3894c (~538w @234c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 3894 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 16.65 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 233.8 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 16.65s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:141 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:639 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:640 Raw response preview: Okay, let's build an outline for a "Test Biology" exam. This outline is designed to be adaptable, so I'll provide a tiered structure with suggested topics and difficulty levels. You can adjust it based on the specific course level (high school, introductory college, etc.) and the weight of each topic.

**I. Cell Biology (20-30% of Exam)**

*   **A. Basic Cell Structure & Function (4-6%)**
    *   1.  Prokaryotic vs. Eukaryotic Cells  Key Differences (Focus)
    *   2.  Animal vs. Plant Cells  ...
____________ TestPipelineIntegration.test_pipeline_module_filtering ____________
tests/test_pipeline_integration.py:139: in test_pipeline_module_filtering
    outline_path = generator.stage1_generate_outline(num_modules=3, total_sessions=6)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/generate/orchestration/pipeline.py:367: in stage1_generate_outline
    outline = self.outline_generator.generate_outline(
src/generate/stages/stage1_outline.py:641: in generate_outline
    raise ValueError("LLM did not return valid JSON. Check logs for details.")
E   ValueError: LLM did not return valid JSON. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 07:00:34,018 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_module_filtering0/config
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_module_filtering0/config
----------------------------- Captured stdout call -----------------------------
2025-12-16 07:00:35,451 - src.generate.orchestration.pipeline - INFO - Initializing Educational Course Generator pipeline...
2025-12-16 07:00:35,454 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
2025-12-16 07:00:35,454 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 07:00:35,454 - src.generate.orchestration.pipeline - INFO - Pipeline initialized successfully
2025-12-16 07:00:35,454 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:35,454 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 07:00:35,454 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:35,455 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 07:00:35,455 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_module_filtering0/output/outlines
2025-12-16 07:00:35,455 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 07:00:35,455 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 3
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,455 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - Modules: 3
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - Total Sessions: 6
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator....'
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "None specified"
2025-12-16 07:00:35,456 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    num_modules             : 3
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 6
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - INFO -    All 1 required variables provided
2025-12-16 07:00:35,457 - src.generate.stages.stage1_outline - WARNING -     Extra 15 variables provided (will be ignored):
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - additional_constraints
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - avg_sessions_per_module
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - course_description
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - course_duration
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - course_level
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - num_modules
2025-12-16 07:00:35,458 - src.generate.stages.stage1_outline - WARNING -       - subject
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - WARNING -       - total_sessions
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Generating 3 modules with 6 total sessions
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 31 characters
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - System prompt size: 27 characters
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 07:00:35,459 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 07:00:35,462 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 07:00:35,462 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 07:00:35,478 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 07:00:35,478 - src.llm.client - INFO - [out:0a5608]  out | m=gemma3:4b | p=31c | t=60s
2025-12-16 07:00:35,478 - src.llm.client - INFO - [out:0a5608] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 07:00:35,478 - src.llm.client - INFO - [out:0a5608] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 07:00:35,481 - src.llm.client - INFO - [out:0a5608] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
2025-12-16 07:00:35,481 - src.llm.client - INFO - [out:0a5608] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 07:00:35,645 - src.llm.request_handler - INFO - [out:0a5608]  Done 0.16s
2025-12-16 07:00:35,646 - src.llm.client - INFO - [out:0a5608]  HTTP 200 in 0.16s
2025-12-16 07:00:35,646 - src.llm.client - INFO - [out:0a5608]  Stream active (200)
2025-12-16 07:00:35,646 - src.llm.client - INFO - [out:0a5608] Starting stream parsing, waiting for first chunk...
2025-12-16 07:00:37,661 - src.llm.client - INFO - [out:0a5608]  2.0s: 532c @264c/s (137ch, ~133t @66t/s)
2025-12-16 07:00:39,667 - src.llm.client - INFO - [out:0a5608]  4.0s: 1044c @260c/s (274ch, ~261t @65t/s)
2025-12-16 07:00:41,668 - src.llm.client - INFO - [out:0a5608]  6.0s: 1540c @256c/s (410ch, ~385t @64t/s)
2025-12-16 07:00:43,669 - src.llm.client - INFO - [out:0a5608]  8.0s: 1949c @243c/s (545ch, ~487t @61t/s)
2025-12-16 07:00:45,678 - src.llm.client - INFO - [out:0a5608]  10.0s: 2418c @241c/s (680ch, ~604t @60t/s)
2025-12-16 07:00:47,682 - src.llm.client - INFO - [out:0a5608]  12.0s: 2886c @240c/s (814ch, ~722t @60t/s)
2025-12-16 07:00:49,686 - src.llm.client - INFO - [out:0a5608]  14.0s: 3483c @248c/s (947ch, ~871t @62t/s)
2025-12-16 07:00:51,185 - src.llm.client - INFO - [out:0a5608]  Done 15.71s: 3902c (~503w @248c/s)
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 3902 characters)
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - Generation took 15.71 seconds
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - Generation rate: 248.4 chars/s
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - Generation performance: 15.71s (within expected range)
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 07:00:51,185 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 07:00:51,186 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:00:51,186 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:00:51,186 - src.generate.stages.stage1_outline - ERROR - Raw response preview: Okay, lets build an outline for a Biology Test! This will be a comprehensive outline, adaptable for different levels (high school, introductory college, etc.). I'll break it down by sections and give estimated time allocations.  This is a flexible framework  youll need to adjust it based on your specific curriculum and the focus of your test.

**I. Cell Biology (30-40% of Test)**

*   **A. Cell Structure & Function (10-15%)**
    *   **1. Prokaryotic vs. Eukaryotic Cells:** (2-3%) - Differenc...
------------------------------ Captured log call -------------------------------
INFO     src.generate.orchestration.pipeline:pipeline.py:66 Initializing Educational Course Generator pipeline...
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.orchestration.pipeline:pipeline.py:81 Pipeline initialized successfully
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_module_filtering0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 3
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 3
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 6
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "None specified"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 6
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 1 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 15 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - additional_constraints
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - avg_sessions_per_module
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_description
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_duration
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_level
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - num_modules
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - subject
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - total_sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 3 modules with 6 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 31 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 27 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:0a5608]  out | m=gemma3:4b | p=31c | t=60s
INFO     src.llm.client:client.py:244 [out:0a5608] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:0a5608] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:0a5608] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
INFO     src.llm.client:client.py:283 [out:0a5608] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:0a5608]  Done 0.16s
INFO     src.llm.client:client.py:305 [out:0a5608]  HTTP 200 in 0.16s
INFO     src.llm.client:client.py:339 [out:0a5608]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:0a5608] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:638 [out:0a5608]  2.0s: 532c @264c/s (137ch, ~133t @66t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  4.0s: 1044c @260c/s (274ch, ~261t @65t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  6.0s: 1540c @256c/s (410ch, ~385t @64t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  8.0s: 1949c @243c/s (545ch, ~487t @61t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  10.0s: 2418c @241c/s (680ch, ~604t @60t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  12.0s: 2886c @240c/s (814ch, ~722t @60t/s)
INFO     src.llm.client:client.py:638 [out:0a5608]  14.0s: 3483c @248c/s (947ch, ~871t @62t/s)
INFO     src.llm.client:client.py:364 [out:0a5608]  Done 15.71s: 3902c (~503w @248c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 3902 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 15.71 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 248.4 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 15.71s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:141 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:639 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:640 Raw response preview: Okay, lets build an outline for a Biology Test! This will be a comprehensive outline, adaptable for different levels (high school, introductory college, etc.). I'll break it down by sections and give estimated time allocations.  This is a flexible framework  youll need to adjust it based on your specific curriculum and the focus of your test.

**I. Cell Biology (30-40% of Test)**

*   **A. Cell Structure & Function (10-15%)**
    *   **1. Prokaryotic vs. Eukaryotic Cells:** (2-3%) - Differenc...
____________ TestPipelineIntegration.test_pipeline_output_structure ____________
tests/test_pipeline_integration.py:167: in test_pipeline_output_structure
    outline_path = generator.stage1_generate_outline(num_modules=1, total_sessions=2)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/generate/orchestration/pipeline.py:367: in stage1_generate_outline
    outline = self.outline_generator.generate_outline(
src/generate/stages/stage1_outline.py:641: in generate_outline
    raise ValueError("LLM did not return valid JSON. Check logs for details.")
E   ValueError: LLM did not return valid JSON. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 07:00:51,219 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_output_structure0/config
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_output_structure0/config
----------------------------- Captured stdout call -----------------------------
2025-12-16 07:00:52,184 - src.generate.orchestration.pipeline - INFO - Initializing Educational Course Generator pipeline...
2025-12-16 07:00:52,187 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
2025-12-16 07:00:52,188 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - INFO - Pipeline initialized successfully
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - INFO - STAGE 1: Generating Course Outline
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - INFO - 
2025-12-16 07:00:52,188 - src.config.loader - WARNING - No JSON outline found in any search location:
2025-12-16 07:00:52,188 - src.config.loader - WARNING -   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_output_structure0/output/outlines
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - WARNING - No JSON outline found
2025-12-16 07:00:52,188 - src.generate.orchestration.pipeline - WARNING - Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
2025-12-16 07:00:52,188 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,188 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 07:00:52,188 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,188 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 1
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Modules: 1
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Total Sessions: 2
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 07:00:52,189 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are a biology educator....'
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "None specified"
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 07:00:52,190 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    num_modules             : 1
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 2
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - INFO -    All 1 required variables provided
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - WARNING -     Extra 15 variables provided (will be ignored):
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - WARNING -       - additional_constraints
2025-12-16 07:00:52,191 - src.generate.stages.stage1_outline - WARNING -       - avg_sessions_per_module
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - course_description
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - course_duration
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - course_level
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - num_modules
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - subject
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - WARNING -       - total_sessions
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - Generating 1 modules with 2 total sessions
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 31 characters
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - System prompt size: 27 characters
2025-12-16 07:00:52,192 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 07:00:52,193 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 07:00:52,193 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 07:00:52,193 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 07:00:52,193 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 07:00:52,193 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 07:00:52,195 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 07:00:52,195 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 07:00:52,209 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 07:00:52,209 - src.llm.client - INFO - [out:b200b3]  out | m=gemma3:4b | p=31c | t=60s
2025-12-16 07:00:52,210 - src.llm.client - INFO - [out:b200b3] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 07:00:52,210 - src.llm.client - INFO - [out:b200b3] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 07:00:52,212 - src.llm.client - INFO - [out:b200b3] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
2025-12-16 07:00:52,212 - src.llm.client - INFO - [out:b200b3] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 07:00:52,376 - src.llm.request_handler - INFO - [out:b200b3]  Done 0.16s
2025-12-16 07:00:52,377 - src.llm.client - INFO - [out:b200b3]  HTTP 200 in 0.16s
2025-12-16 07:00:52,377 - src.llm.client - INFO - [out:b200b3]  Stream active (200)
2025-12-16 07:00:52,377 - src.llm.client - INFO - [out:b200b3] Starting stream parsing, waiting for first chunk...
2025-12-16 07:00:54,391 - src.llm.client - INFO - [out:b200b3]  2.0s: 609c @302c/s (137ch, ~152t @76t/s)
2025-12-16 07:00:56,394 - src.llm.client - INFO - [out:b200b3]  4.0s: 1147c @286c/s (271ch, ~287t @71t/s)
2025-12-16 07:00:58,401 - src.llm.client - INFO - [out:b200b3]  6.0s: 1684c @280c/s (407ch, ~421t @70t/s)
2025-12-16 07:01:00,406 - src.llm.client - INFO - [out:b200b3]  8.0s: 2154c @268c/s (542ch, ~538t @67t/s)
2025-12-16 07:01:02,411 - src.llm.client - INFO - [out:b200b3]  10.0s: 2621c @261c/s (671ch, ~655t @65t/s)
2025-12-16 07:01:04,415 - src.llm.client - INFO - [out:b200b3]  12.0s: 3124c @260c/s (800ch, ~781t @65t/s)
2025-12-16 07:01:06,418 - src.llm.client - INFO - [out:b200b3]  14.0s: 3731c @266c/s (933ch, ~933t @66t/s)
2025-12-16 07:01:07,118 - src.llm.client - INFO - [out:b200b3]  Done 14.91s: 3919c (~525w @263c/s)
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 3919 characters)
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - Generation took 14.91 seconds
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - Generation rate: 262.9 chars/s
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - Generation performance: 14.91s (within expected range)
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:01:07,118 - src.generate.stages.stage1_outline - ERROR - Failed to extract valid JSON from LLM response
2025-12-16 07:01:07,119 - src.generate.stages.stage1_outline - ERROR - Raw response preview: Okay, let's craft a test outline for Biology! Ill aim for a comprehensive outline that can be adapted for different levels (high school, introductory college, etc.). Ill break it down by sections, with estimated time allocations (these are just guidelines  adjust based on your specific curriculum).

**Test Title: Biology Assessment**

**Total Estimated Time:** 90-120 minutes (adjust accordingly)

**I. Introduction & Foundations (10-15 minutes)**

*   **A. Scientific Method:** (5 minutes)
    ...
------------------------------ Captured log call -------------------------------
INFO     src.generate.orchestration.pipeline:pipeline.py:66 Initializing Educational Course Generator pipeline...
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.orchestration.pipeline:pipeline.py:81 Pipeline initialized successfully
INFO     src.generate.orchestration.pipeline:logging_setup.py:109 
INFO     src.generate.orchestration.pipeline:logging_setup.py:110 STAGE 1: Generating Course Outline
INFO     src.generate.orchestration.pipeline:logging_setup.py:111 
WARNING  src.config.loader:loader.py:446 No JSON outline found in any search location:
WARNING  src.config.loader:loader.py:448   - /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-37/test_pipeline_output_structure0/output/outlines
WARNING  src.generate.orchestration.pipeline:pipeline.py:294 No JSON outline found
WARNING  src.generate.orchestration.pipeline:pipeline.py:295 Run stage 1 (outline generation) first: uv run python3 scripts/03_generate_outline.py
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 1
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 1
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are a biology educator....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "None specified"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 1
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 1 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 15 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - additional_constraints
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - avg_sessions_per_module
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_description
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_duration
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - course_level
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - num_modules
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - subject
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - total_sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 1 modules with 2 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 31 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 27 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:b200b3]  out | m=gemma3:4b | p=31c | t=60s
INFO     src.llm.client:client.py:244 [out:b200b3] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:b200b3] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:b200b3] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=183 bytes, prompt=31 chars
INFO     src.llm.client:client.py:283 [out:b200b3] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:b200b3]  Done 0.16s
INFO     src.llm.client:client.py:305 [out:b200b3]  HTTP 200 in 0.16s
INFO     src.llm.client:client.py:339 [out:b200b3]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:b200b3] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:638 [out:b200b3]  2.0s: 609c @302c/s (137ch, ~152t @76t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  4.0s: 1147c @286c/s (271ch, ~287t @71t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  6.0s: 1684c @280c/s (407ch, ~421t @70t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  8.0s: 2154c @268c/s (542ch, ~538t @67t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  10.0s: 2621c @261c/s (671ch, ~655t @65t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  12.0s: 3124c @260c/s (800ch, ~781t @65t/s)
INFO     src.llm.client:client.py:638 [out:b200b3]  14.0s: 3731c @266c/s (933ch, ~933t @66t/s)
INFO     src.llm.client:client.py:364 [out:b200b3]  Done 14.91s: 3919c (~525w @263c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 3919 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 14.91 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 262.9 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 14.91s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:141 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:639 Failed to extract valid JSON from LLM response
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:640 Raw response preview: Okay, let's craft a test outline for Biology! Ill aim for a comprehensive outline that can be adapted for different levels (high school, introductory college, etc.). Ill break it down by sections, with estimated time allocations (these are just guidelines  adjust based on your specific curriculum).

**Test Title: Biology Assessment**

**Total Estimated Time:** 90-120 minutes (adjust accordingly)

**I. Introduction & Foundations (10-15 minutes)**

*   **A. Scientific Method:** (5 minutes)
    ...
____________ TestSummaryGenerator.test_generate_validation_summary _____________
tests/test_summary_generator.py:95: in test_generate_validation_summary
    assert "[VALIDATION SUMMARY]" in all_log_text
E   AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Critical: Missing question marks\n'
----------------------------- Captured stdout call -----------------------------
2025-12-16 07:01:10,075 - test - WARNING -     1. Critical: Missing question marks
------------------------------ Captured log call -------------------------------
WARNING  test:summary_generator.py:115     1. Critical: Missing question marks
___________ TestSummaryGenerator.test_generate_stage_summary_success ___________
tests/test_summary_generator.py:121: in test_generate_stage_summary_success
    assert "Test Stage - Summary" in all_log_text
E   AssertionError: assert 'Test Stage - Summary' in ''
__________ TestSummaryGenerator.test_generate_stage_summary_no_items ___________
tests/test_summary_generator.py:209: in test_generate_stage_summary_no_items
    assert "Test Stage - Summary" in all_log_text
E   AssertionError: assert 'Test Stage - Summary' in ''
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.13.11-final-0 _______________

Name                                           Stmts   Miss  Cover   Missing
----------------------------------------------------------------------------
src/config/loader.py                             394     91    77%   123-125, 147-164, 183-185, 258, 345-346, 353-362, 374-375, 404-405, 414-415, 439-441, 498-500, 630-632, 664, 692-694, 736-738, 841-850, 864, 884, 890, 895, 914, 920, 926, 936, 943, 949, 956, 975-980, 983-989, 999-1017
src/generate/formats/diagrams.py                 134     33    75%   98-135, 191-193, 199-201, 220, 267-270
src/generate/formats/labs.py                      85     22    74%   84, 93-118, 187-192, 204-210
src/generate/formats/lectures.py                 117     38    68%   110-116, 144-181, 261-265
src/generate/formats/questions.py                156     41    74%   47-48, 51, 129-170, 236-238, 257, 310-328
src/generate/formats/study_notes.py              118     51    57%   89, 100-102, 111-170, 246-251, 263-270
src/generate/orchestration/batch.py              212     53    75%   88-89, 104, 107-108, 113-114, 118, 140, 148-162, 165-169, 239-245, 249-252, 307-308, 357-358, 360-361, 363-364, 366-367, 391-395, 453
src/generate/orchestration/pipeline.py           410    313    24%   128, 181-185, 196, 230-231, 251-280, 299-304, 346-364, 374-384, 407-823, 840-874
src/generate/processors/cleanup.py               150     15    90%   225-227, 233-234, 238-240, 244-246, 265, 347-350
src/generate/processors/parser.py                105      3    97%   91, 167-168
src/generate/stages/outline_quality.py           172     35    80%   101, 106, 114, 118-120, 170, 184-187, 213, 260, 274, 288, 298, 336-338, 348-350, 360-362, 375-377, 394-399, 441, 449, 457, 465
src/generate/stages/stage1_outline.py            489     91    81%   78-79, 111-112, 128-132, 176-177, 226-227, 231-232, 236-237, 382-383, 401-402, 406-410, 419-420, 422, 438, 522, 541-548, 552, 567-573, 599, 605, 611-631, 657-660, 671-673, 676-678, 682, 712-713, 715-716, 721-722, 730, 744, 838-852, 902-910, 944-945, 960-985
src/llm/client.py                                400    123    69%   133, 268, 320, 371-386, 389-412, 424-428, 532-547, 558-559, 575, 577, 579, 593, 614-620, 623-629, 660-675, 688-708, 719-737, 757-785, 800-817, 825-838, 902-909, 923-924, 928-929, 955-959
src/llm/health.py                                102     21    79%   64-66, 133-135, 168-169, 195, 200-204, 226-230, 256-262, 266-269, 291-300
src/llm/request_handler.py                        85     13    85%   123-124, 143-149, 182, 192, 231, 236-240
src/utils/content_analysis/analyzers.py          459     75    84%   365, 533, 557-558, 565-567, 570-571, 628, 652-653, 660-662, 665-666, 801-802, 869-870, 937-938, 987-993, 997-1011, 1085-1086, 1112-1116, 1123-1130, 1142, 1146, 1166-1210
src/utils/content_analysis/consistency.py         93     84    10%   24-40, 52-116, 139-188, 208-225
src/utils/content_analysis/logging.py            136     68    50%   56-83, 98-109, 112-123, 141-142, 161-195
src/utils/content_analysis/mermaid.py            119      6    95%   180-182, 184-186
src/utils/content_analysis/question_fixes.py      73     17    77%   47, 55, 59, 101-119, 155-156
src/utils/error_collector.py                     149     68    54%   327-356, 376-422, 433-468, 481-531
src/utils/helpers.py                             122     29    76%   173-174, 188-191, 224-228, 240-243, 252-253, 272, 282, 314, 319-326, 342-345
src/utils/logging_setup.py                       166     52    69%   192, 196, 290, 312-313, 342, 364-408, 421-429, 452-455, 484-485
src/utils/prompt_helpers.py                       93      6    94%   87, 116, 125, 182, 196-197
src/utils/smart_retry.py                         152     64    58%   157-158, 160-161, 171-178, 205-206, 230-243, 263-307, 318-320, 332-338
src/utils/summary_generator.py                   167     13    92%   117, 150-152, 230, 239-240, 267-272, 307
src/website/content_loader.py                     56      5    91%   76, 133-134, 157-158
src/website/generator.py                          78      3    96%   172-177
src/website/templates.py                          77      4    95%   35-38, 244
----------------------------------------------------------------------------
TOTAL                                           5174   1437    72%

16 files skipped due to complete coverage.
Coverage HTML written to dir htmlcov
============================= slowest 10 durations =============================
48.36s call     tests/test_new_generators.py::TestLabGenerator::test_generate_multiple_labs
28.56s call     tests/test_new_generators.py::TestStudyNotesGenerator::test_generate_study_notes
17.03s call     tests/test_llm_client.py::TestStreamingIssues::test_stream_progress_logging
16.68s call     tests/test_pipeline_integration.py::TestPipelineIntegration::test_full_pipeline_stage1_to_stage2
16.66s call     tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stream_progress_monitoring
16.50s call     tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_adaptive_timeout_extension_on_progress
16.32s call     tests/test_llm_client.py::TestStreamProgressLogging::test_progress_logging_during_long_stream
15.91s call     tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_lecture_generator_empty_module_info
15.74s call     tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_module_filtering
15.07s call     tests/test_llm_client.py::TestSystemPromptHandling::test_system_prompt_with_special_chars
=========================== short test summary info ============================
FAILED tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_validation_summary_with_mixed_severities - AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Error 0\nWARNING  test:summary_generator.py:115     2. Error 3\nWARNING  test:summary_generator.py:115     3. Error 6\nWARNING  test:summary_generator.py:115     4. Error 9\n'
FAILED tests/test_outline_generator.py::TestOutlineGenerator::test_generate_outline - ValueError: Generated outline JSON failed validation. Check logs for details.
FAILED tests/test_pipeline.py::TestContentGenerator::test_stage1_generate_outline - ValueError: Generated outline JSON failed validation. Check logs for details.
FAILED tests/test_pipeline.py::TestContentGenerator::test_run_full_pipeline - ValueError: Generated outline JSON failed validation. Check logs for details.
FAILED tests/test_pipeline_integration.py::TestPipelineIntegration::test_full_pipeline_stage1_to_stage2 - ValueError: LLM did not return valid JSON. Check logs for details.
FAILED tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_module_filtering - ValueError: LLM did not return valid JSON. Check logs for details.
FAILED tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_output_structure - ValueError: LLM did not return valid JSON. Check logs for details.
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_validation_summary - AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Critical: Missing question marks\n'
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_success - AssertionError: assert 'Test Stage - Summary' in ''
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_no_items - AssertionError: assert 'Test Stage - Summary' in ''
============ 10 failed, 644 passed, 4 skipped in 472.69s (0:07:52) =============