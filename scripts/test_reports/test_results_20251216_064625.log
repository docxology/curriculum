============================= test session starts ==============================
platform darwin -- Python 3.13.11, pytest-8.4.2, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.13/bin/python3.13
cachedir: .pytest_cache
metadata: {'Python': '3.13.11', 'Platform': 'macOS-26.2-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.2', 'pluggy': '1.6.0'}, 'Plugins': {'mock': '3.15.1', 'asyncio': '1.2.0', 'jaxtyping': '0.3.3', 'anyio': '4.9.0', 'html': '4.1.1', 'xdist': '3.8.0', 'timeout': '2.4.0', 'metadata': '3.1.1', 'hypothesis': '6.138.15', 'benchmark': '5.1.0', 'cov': '7.0.0'}}
hypothesis profile 'default'
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/4d/Documents/GitHub/curriculum
configfile: pyproject.toml
testpaths: tests
plugins: mock-3.15.1, asyncio-1.2.0, jaxtyping-0.3.3, anyio-4.9.0, html-4.1.1, xdist-3.8.0, timeout-2.4.0, metadata-3.1.1, hypothesis-6.138.15, benchmark-5.1.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 658 items

tests/test_batch_processor.py::TestBatchCourseProcessor::test_init_with_valid_paths PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_init_without_project_root PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_list_available_courses PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_list_available_courses_empty PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_success PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_partial_failure PASSED [  0%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_for_outline_exception PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_success PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_with_skips PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_full_pipeline_stage_failure PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_process_all_courses_empty_list PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_generate_summary PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_run_script_with_course_flag PASSED [  1%]
tests/test_batch_processor.py::TestBatchCourseProcessor::test_run_script_without_course_flag_for_other_scripts PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_okay_heres PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_alright PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_sure PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_would_you_like PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_remove_let_me_know PASSED [  2%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_multiple_artifacts PASSED [  3%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_no_artifacts PASSED [  3%]
tests/test_cleanup.py::TestCleanConversationalArtifacts::test_case_insensitive PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_instructor_name PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_professor_name PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_month_format PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_slash_format PASSED [  3%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_replace_date_iso_format PASSED [  4%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_multiple_names_and_dates PASSED [  4%]
tests/test_cleanup.py::TestStandardizePlaceholders::test_no_placeholders PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_valid_content PASSED    [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_conversational_artifacts PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_specific_names PASSED [  4%]
tests/test_cleanup.py::TestValidateContent::test_detect_specific_dates PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_validate_questions_with_answers PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_validate_questions_missing_answers PASSED [  5%]
tests/test_cleanup.py::TestValidateContent::test_issue_examples_limited PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_full_cleanup_removes_artifacts PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_full_cleanup_standardizes_placeholders PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_validation_after_cleanup PASSED [  5%]
tests/test_cleanup.py::TestFullCleanupPipeline::test_cleanup_preserves_content PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_all_valid PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_with_issues PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_empty PASSED [  6%]
tests/test_cleanup.py::TestBatchValidateMaterials::test_batch_validate_different_content_types PASSED [  6%]
tests/test_cleanup.py::TestEdgeCases::test_empty_content PASSED          [  6%]
tests/test_cleanup.py::TestEdgeCases::test_whitespace_only PASSED        [  6%]
tests/test_cleanup.py::TestEdgeCases::test_very_long_content PASSED      [  7%]
tests/test_cleanup.py::TestEdgeCases::test_special_characters_preserved PASSED [  7%]
tests/test_cleanup.py::TestEdgeCases::test_unicode_content PASSED        [  7%]
tests/test_cleanup.py::TestBatchValidationAdvanced::test_batch_validation_mixed_results PASSED [  7%]
tests/test_cleanup.py::TestFullCleanupPipelineComprehensive::test_full_cleanup_pipeline_all_steps PASSED [  7%]
tests/test_cleanup.py::TestUnicodePreservation::test_unicode_preservation_in_cleanup PASSED [  7%]
tests/test_cleanup.py::TestLargeContentHandling::test_very_long_content_100kb PASSED [  8%]
tests/test_cleanup.py::TestWhitespaceEdgeCases::test_whitespace_only_content_cleanup PASSED [  8%]
tests/test_cleanup.py::TestWhitespaceEdgeCases::test_content_with_excessive_whitespace PASSED [  8%]
tests/test_cleanup.py::TestMultiplePlaceholders::test_multiple_placeholders_same_text PASSED [  8%]
tests/test_cleanup.py::TestCodeBlockPreservation::test_cleanup_preserves_code_blocks PASSED [  8%]
tests/test_cleanup.py::TestQuotedTextPreservation::test_cleanup_preserves_quotes PASSED [  8%]
tests/test_cleanup.py::TestValidationExtensibility::test_validation_different_content_types PASSED [  8%]
tests/test_cleanup.py::TestValidationExtensibility::test_validation_provides_actionable_feedback PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_with_mixed_line_endings PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_with_null_bytes PASSED [  9%]
tests/test_cleanup.py::TestCleanupRobustness::test_cleanup_idempotency PASSED [  9%]
tests/test_cleanup.py::TestErrorHandlingInCleanup::test_cleanup_with_malformed_regex_patterns PASSED [  9%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_okay_i_understand PASSED [  9%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_i_have_carefully_adhered PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_the_output_following PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_the_response_adhering PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_i_trust_this_response PASSED [ 10%]
tests/test_cleanup.py::TestNewConversationalPatterns::test_remove_do_you_have_any_further PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_same_level PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_different_levels PASSED [ 10%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_case_insensitive PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_remove_duplicate_headings_preserves_content PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_no_duplicate_headings_unchanged PASSED [ 11%]
tests/test_cleanup.py::TestDuplicateHeadingRemoval::test_duplicate_headings_in_full_cleanup PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_init_with_valid_path PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_init_with_invalid_path PASSED [ 11%]
tests/test_config_loader.py::TestConfigLoader::test_load_course_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_load_llm_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_load_output_config PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_course_info PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_without_outline PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_without_outline PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_course_defaults PASSED [ 12%]
tests/test_config_loader.py::TestConfigLoader::test_get_llm_parameters PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_prompt_template PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_prompt_template_not_found PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_get_output_paths PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_validate_course_config_valid PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_validate_course_config_missing_field PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_missing_config_file PASSED [ 13%]
tests/test_config_loader.py::TestConfigLoader::test_find_latest_outline_json_explicit_path PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_find_latest_outline_json_not_found PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_from_outline_with_valid_json PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_modules_from_outline_invalid_json PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_from_outline PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_from_outline_not_found PASSED [ 14%]
tests/test_config_loader.py::TestConfigLoader::test_malformed_yaml_syntax_error PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_missing_llm_model_field PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_default_value_application PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_discovery_multiple_locations PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_discovery_prefers_recent PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_empty_json_outline PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_outline_missing_required_fields PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_concurrent_config_loading PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_cache_invalidation PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_yaml_with_unicode PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_config_file_permissions_error PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_module_by_id_type_conversion PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_with_config PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_defaults PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_invalid_values PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_get_logging_intervals_missing_output_config PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_basic PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_multiple_spaces PASSED [ 17%]
tests/test_content_analysis.py::TestWordCounting::test_count_words_empty PASSED [ 17%]
tests/test_content_analysis.py::TestStructureCounting::test_count_sections PASSED [ 17%]
tests/test_content_analysis.py::TestStructureCounting::test_count_subsections PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_examples PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_definitions PASSED [ 18%]
tests/test_content_analysis.py::TestContentCounting::test_count_cross_references PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_basic PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_warnings PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exact_min_word_count PASSED [ 18%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exact_max_word_count PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_exceeds_max_word_count PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_missing_sections PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_too_many_sections PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_few_examples PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_too_many_examples PASSED [ 19%]
tests/test_content_analysis.py::TestLectureAnalysis::test_analyze_lecture_compliance_status PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_basic PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_warnings PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_no_safety_warnings PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_no_tables PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_few_procedure_steps PASSED [ 20%]
tests/test_content_analysis.py::TestLabAnalysis::test_analyze_lab_procedure_step_counting PASSED [ 20%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_actual_format PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_basic PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_real_content_sample PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_no_questions_warning PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_missing_answers PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_missing_explanations PASSED [ 21%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_multiple_formats PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_question_marks PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_no_question_marks PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_mc_structure_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_length_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_question_mark_ratio PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_mc_option_count_validation PASSED [ 22%]
tests/test_content_analysis.py::TestQuestionsAnalysis::test_analyze_questions_explanation_length_validation PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_basic PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_key_concept_formats PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_few_key_concepts PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_too_many_key_concepts PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_word_count_limit PASSED [ 23%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_bullet_point_structure PASSED [ 24%]
tests/test_content_analysis.py::TestStudyNotesAnalysis::test_analyze_study_notes_with_tables PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_markdown_section_hierarchy PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_cross_reference_detection PASSED [ 24%]
tests/test_content_analysis.py::TestContentStructureValidation::test_term_definition_detection PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_code_fences PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_commands PASSED [ 24%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_classdef_commands PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_multiple_style_commands PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_with_indentation PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_removes_style_in_complex_diagram PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_checks_diagram_type PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_valid_diagram PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_node_count PASSED [ 25%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_connection_count PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_node_text_length PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidValidation::test_validate_empty_nodes PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_code_fences PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_linkstyle PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_explanatory_text_after_diagram PASSED [ 26%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_explanatory_text_before_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_removes_style_commands PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_preserves_valid_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_handles_complex_diagram_with_linkstyle PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_handles_empty_diagram PASSED [ 27%]
tests/test_content_analysis.py::TestMermaidCleanup::test_clean_integration_with_validate PASSED [ 27%]
tests/test_content_analysis.py::TestApplicationAnalysis::test_analyze_application_basic PASSED [ 27%]
tests/test_content_analysis.py::TestApplicationAnalysis::test_analyze_application_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestExtensionAnalysis::test_analyze_extension_basic PASSED [ 28%]
tests/test_content_analysis.py::TestExtensionAnalysis::test_analyze_extension_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestVisualizationAnalysis::test_analyze_visualization_basic PASSED [ 28%]
tests/test_content_analysis.py::TestVisualizationAnalysis::test_analyze_visualization_warnings PASSED [ 28%]
tests/test_content_analysis.py::TestIntegrationAnalysis::test_analyze_integration_basic PASSED [ 28%]
tests/test_content_analysis.py::TestIntegrationAnalysis::test_analyze_integration_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestInvestigationAnalysis::test_analyze_investigation_basic PASSED [ 29%]
tests/test_content_analysis.py::TestInvestigationAnalysis::test_analyze_investigation_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestOpenQuestionsAnalysis::test_analyze_open_questions_basic PASSED [ 29%]
tests/test_content_analysis.py::TestOpenQuestionsAnalysis::test_analyze_open_questions_warnings PASSED [ 29%]
tests/test_content_analysis.py::TestContentMetricsLogging::test_log_lecture_metrics PASSED [ 29%]
tests/test_content_analysis.py::TestContentMetricsLogging::test_log_metrics_with_warnings PASSED [ 29%]
tests/test_content_generators.py::TestContentGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_generate_lecture PASSED [ 30%]
tests/test_content_generators.py::TestLectureGenerator::test_save_lecture PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_init PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_generate_diagram PASSED [ 30%]
tests/test_content_generators.py::TestDiagramGenerator::test_save_diagram PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_init PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_save_questions PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions_pre_validation PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_diagram_retry_handles_validation PASSED [ 31%]
tests/test_content_generators.py::TestQuestionGenerator::test_generate_questions_retry_handles_validation PASSED [ 31%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_with_zero_courses PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_with_many_courses PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_keyboard_interrupt PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_invalid_input_recovery PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_empty_input_uses_default PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_out_of_range_input PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_negative_input PASSED [ 32%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_default_option PASSED [ 33%]
tests/test_course_selection_edge_cases.py::TestCourseSelectionEdgeCases::test_select_course_generate_all_option PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_init PASSED      [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_critical PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_warning PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_error_info PASSED [ 33%]
tests/test_error_collector.py::TestErrorCollector::test_add_warning PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_all_issues_sorted PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_content_type PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_type PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_by_context PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_get_summary PASSED [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_clear PASSED     [ 34%]
tests/test_error_collector.py::TestErrorCollector::test_to_dict PASSED   [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_bool PASSED      [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_len PASSED       [ 35%]
tests/test_error_collector.py::TestErrorCollector::test_metadata PASSED  [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_large_error_collection PASSED [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_mixed_error_types PASSED [ 35%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_error_categorization_accuracy PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_summary_with_mixed_content_types PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_format_error_list_with_max_items PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_format_error_list_shows_context PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_critical_issues_extraction PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_warnings_extraction PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_empty_collector_summary PASSED [ 36%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_stage_summary_with_large_dataset FAILED [ 37%]
tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_validation_summary_with_mixed_severities FAILED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_lecture_generator_empty_module_info PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_diagram_generator_empty_topic PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_question_generator_invalid_num_questions PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_lecture_save_creates_directory PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_diagram_save_with_special_chars PASSED [ 37%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorFileOperations::test_questions_save_unicode PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorValidation::test_lecture_generator_retry_on_validation_failure PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorValidation::test_diagram_generator_retry_on_invalid_mermaid PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_lecture_very_long_module_name PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_questions_empty_subtopics PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorEdgeCases::test_diagram_unicode_topic PASSED [ 38%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorIntegration::test_all_generators_initialization PASSED [ 39%]
tests/test_format_generators_comprehensive.py::TestFormatGeneratorIntegration::test_generators_share_config PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_simple PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_with_suffix PASSED [ 39%]
tests/test_helpers_extended.py::TestFormatModuleFilename::test_format_module_filename_special_chars PASSED [ 39%]
tests/test_helpers_extended.py::TestTimestampFormatting::test_format_timestamp_with_datetime PASSED [ 39%]
tests/test_helpers_extended.py::TestTimestampFormatting::test_format_timestamp_current PASSED [ 39%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_unicode PASSED [ 40%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_multiple_dots PASSED [ 40%]
tests/test_helpers_extended.py::TestSanitizeFilenameEdgeCases::test_sanitize_filename_empty_extension PASSED [ 40%]
tests/test_helpers_extended.py::TestSlugifyUnicode::test_slugify_unicode_to_ascii PASSED [ 40%]
tests/test_helpers_extended.py::TestSlugifyUnicode::test_slugify_mixed_unicode_ascii PASSED [ 40%]
tests/test_helpers_extended.py::TestErrorRecovery::test_load_markdown_corrupted_encoding PASSED [ 40%]
tests/test_helpers_extended.py::TestErrorRecovery::test_ensure_directory_with_file_conflict PASSED [ 41%]
tests/test_helpers_extended.py::TestTimezoneHandling::test_format_timestamp_timezone_aware PASSED [ 41%]
tests/test_helpers_extended.py::TestTimezoneHandling::test_format_timestamp_naive_datetime PASSED [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_markdown_code_block ERROR [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_plain_code_block ERROR [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_raw_response ERROR [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_embedded_in_text ERROR [ 41%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_with_nested_structure ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_finds_largest_object ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_course_metadata_keyword ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_modules_keyword ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_multiple_objects ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_invalid_json ERROR [ 42%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_malformed_json ERROR [ 43%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_whitespace ERROR [ 43%]
tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_newlines_in_strings ERROR [ 43%]
tests/test_json_outline_integration.py::test_config_loader_find_latest_outline_json PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_find_outline_explicit_path PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_from_outline PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_module_by_id_from_outline PASSED [ 43%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_default_behavior PASSED [ 44%]
tests/test_json_outline_integration.py::test_config_loader_get_module_by_id_default_behavior PASSED [ 44%]
tests/test_json_outline_integration.py::test_config_loader_get_modules_backward_compatibility PASSED [ 44%]
tests/test_json_outline_integration.py::test_outline_json_structure_validation PASSED [ 44%]
tests/test_json_outline_integration.py::test_no_outline_found_returns_empty_list PASSED [ 44%]
tests/test_json_outline_integration.py::test_invalid_json_returns_empty_list PASSED [ 44%]
tests/test_llm_client.py::TestOllamaClient::test_init_with_config PASSED [ 44%]
tests/test_llm_client.py::TestOllamaClient::test_init_with_defaults PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_simple_prompt PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_system_prompt PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_custom_temperature PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_simple PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_multiple_vars PASSED [ 45%]
tests/test_llm_client.py::TestOllamaClient::test_format_prompt_missing_variable PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_generate_with_template PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_generate_empty_prompt_handling PASSED [ 46%]
tests/test_llm_client.py::TestOllamaClient::test_client_with_invalid_model PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_timeout_handling PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_custom_timeout_per_request PASSED [ 46%]
tests/test_llm_client.py::TestLLMTimeoutHandling::test_stream_timeout_tracking PASSED [ 46%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_special_chars PASSED [ 47%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_unicode PASSED [ 47%]
tests/test_llm_client.py::TestTemplateVariableHandling::test_template_variable_empty_string PASSED [ 47%]
tests/test_llm_client.py::TestStreamingAndChunking::test_streaming_response_handling PASSED [ 47%]
tests/test_llm_client.py::TestConnectionPooling::test_multiple_requests_same_client PASSED [ 47%]
tests/test_llm_client.py::TestAPICompatibility::test_api_version_compatibility PASSED [ 47%]
tests/test_llm_client.py::TestParameterValidation::test_parameter_merging PASSED [ 48%]
tests/test_llm_client.py::TestParameterValidation::test_invalid_parameter_handling PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_system_prompt_with_special_chars PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_system_prompt_unicode PASSED [ 48%]
tests/test_llm_client.py::TestSystemPromptHandling::test_empty_system_prompt PASSED [ 48%]
tests/test_llm_client.py::TestRequestIDTracing::test_request_id_generation FAILED [ 48%]
tests/test_llm_client.py::TestRequestIDTracing::test_request_id_in_all_logs PASSED [ 48%]
tests/test_llm_client.py::TestStreamProgressLogging::test_progress_logging_during_long_stream FAILED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_with_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_without_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestConfigurableLoggingIntervals::test_ollama_client_partial_logging_config PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_error_message_includes_context PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_connection_error_message PASSED [ 49%]
tests/test_llm_client.py::TestErrorMessages::test_timeout_error_message_includes_diagnostics PASSED [ 50%]
tests/test_llm_client.py::TestErrorMessages::test_stream_timeout_error_includes_chunks PASSED [ 50%]
tests/test_llm_client.py::TestHangingRequests::test_timeout_enforcement PASSED [ 50%]
tests/test_llm_client.py::TestHangingRequests::test_connection_timeout_vs_read_timeout PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_health_monitor_initialization PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_service_status_check PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_model_status_check PASSED [ 50%]
tests/test_llm_client.py::TestHealthMonitoring::test_get_diagnostics PASSED [ 51%]
tests/test_llm_client.py::TestHealthMonitoring::test_troubleshooting_suggestions PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_handler_initialization PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_with_monitoring PASSED [ 51%]
tests/test_llm_client.py::TestRequestHandler::test_request_cancellation PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_very_short_timeout PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_timeout_with_long_generation PASSED [ 51%]
tests/test_llm_client.py::TestTimeoutScenarios::test_timeout_override PASSED [ 52%]
tests/test_llm_client.py::TestOllamaUnavailable::test_unavailable_service PASSED [ 52%]
tests/test_llm_client.py::TestOllamaUnavailable::test_invalid_model PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_stream_timeout_tracking PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_empty_stream_handling PASSED [ 52%]
tests/test_llm_client.py::TestStreamingIssues::test_stream_progress_logging PASSED [ 52%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_adaptive_timeout_extension_on_progress PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_timeout_configuration_validation PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_operation_specific_timeout PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stream_progress_monitoring PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stuck_stream_detection PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_timeout_error_message_quality PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestRetryOnTimeout::test_retry_on_transient_timeout PASSED [ 53%]
tests/test_llm_client_timeouts.py::TestRetryOnTimeout::test_max_retries_respected PASSED [ 54%]
tests/test_llm_client_timeouts.py::TestTimeoutConfiguration::test_timeout_override PASSED [ 54%]
tests/test_llm_client_timeouts.py::TestTimeoutConfiguration::test_very_long_timeout_warning PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_defaults PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_different_levels PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_console_only PASSED [ 54%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_file_only PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_custom_format PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_creates_directory PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_default_directory PASSED [ 55%]
tests/test_logging_setup.py::TestSetupLogging::test_setup_logging_clears_existing_handlers PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionHeader::test_log_section_header_major PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionHeader::test_log_section_header_minor PASSED [ 55%]
tests/test_logging_setup.py::TestLogSectionClean::test_log_section_clean_default_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogSectionClean::test_log_section_clean_custom_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_basic PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_custom_emoji PASSED [ 56%]
tests/test_logging_setup.py::TestLogInfoBox::test_log_info_box_empty_dict PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_success PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_error PASSED [ 56%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_warning PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_info PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_check PASSED [ 57%]
tests/test_logging_setup.py::TestLogStatusItem::test_log_status_item_default PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_basic PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_different_types PASSED [ 57%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_long_string PASSED [ 58%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_empty PASSED [ 58%]
tests/test_logging_setup.py::TestLogParameters::test_log_parameters_custom_title PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_success PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_missing_vars PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_extra_vars PASSED [ 58%]
tests/test_logging_setup.py::TestLogValidationResults::test_log_validation_results_both_missing_and_extra PASSED [ 58%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_success PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_warning PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_error PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_info PASSED [ 59%]
tests/test_logging_setup.py::TestLogSummaryBox::test_log_summary_box_numeric_formatting PASSED [ 59%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_valid_config PASSED [ 59%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_missing_config PASSED [ 60%]
tests/test_logging_setup.py::TestGetLoggingConfig::test_get_logging_config_with_exception PASSED [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_init PASSED  [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_generate_study_notes PASSED [ 60%]
tests/test_new_generators.py::TestStudyNotesGenerator::test_save_study_notes PASSED [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_init PASSED         [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_generate_lab PASSED [ 60%]
tests/test_new_generators.py::TestLabGenerator::test_generate_multiple_labs PASSED [ 61%]
tests/test_new_generators.py::TestLabGenerator::test_save_lab PASSED     [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_init PASSED  [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_generate_outline FAILED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_save_outline PASSED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_generate_and_save_outline FAILED [ 61%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_structure PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_all_variables_passed_to_template PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_extract_json_malformed_responses PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_edge_cases PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_normalize_session_numbering PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_missing_session_fields PASSED [ 62%]
tests/test_outline_generator.py::TestOutlineGenerator::test_validate_outline_json_wrong_module_structure PASSED [ 62%]
tests/test_outline_generator_noninteractive.py::TestNonInteractiveMode::test_noninteractive_mode_defaults PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestNonInteractiveMode::test_session_distribution_calculation PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_zero PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_one PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_module_count_hundred PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestModuleCountScenarios::test_uneven_session_distribution PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestOutputStructure::test_json_output_structure_validation PASSED [ 63%]
tests/test_outline_generator_noninteractive.py::TestOutputStructure::test_markdown_output_formatting PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestMetadataHandling::test_outline_metadata_completeness PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestMetadataHandling::test_timestamp_generation_format PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_session_rationale_generation PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_learning_objectives_count PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_key_concepts_count PASSED [ 64%]
tests/test_outline_generator_noninteractive.py::TestSessionContentValidation::test_subtopics_count PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestOutlineFileNaming::test_outline_filename_with_timestamp PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestOutlineFileNaming::test_outline_markdown_companion PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestConfigDefaults::test_sessions_per_module_auto_calculate PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestConfigDefaults::test_explicit_sessions_per_module PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestEdgeCaseHandling::test_module_name_with_special_characters PASSED [ 65%]
tests/test_outline_generator_noninteractive.py::TestEdgeCaseHandling::test_unicode_in_course_content PASSED [ 65%]
tests/test_parser.py::TestOutlineParser::test_init PASSED                [ 66%]
tests/test_parser.py::TestOutlineParser::test_parse_modules PASSED       [ 66%]
tests/test_parser.py::TestOutlineParser::test_extract_metadata PASSED    [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_count PASSED    [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_by_index PASSED [ 66%]
tests/test_parser.py::TestOutlineParser::test_get_module_by_index_invalid PASSED [ 66%]
tests/test_parser.py::TestOutlineParser::test_extract_subtopics PASSED   [ 67%]
tests/test_parser.py::TestOutlineParser::test_extract_objectives PASSED  [ 67%]
tests/test_parser.py::TestOutlineParser::test_parse_minimal_outline PASSED [ 67%]
tests/test_parser.py::TestOutlineParser::test_to_dict PASSED             [ 67%]
tests/test_parser.py::TestOutlineParser::test_empty_outline PASSED       [ 67%]
tests/test_parser.py::TestOutlineParser::test_outline_without_modules PASSED [ 67%]
tests/test_parser.py::TestOutlineParser::test_get_course_title PASSED    [ 67%]
tests/test_parser.py::TestOutlineParser::test_get_course_title_no_title PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_malformed_markdown_headers PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_missing_module_section PASSED [ 68%]
tests/test_parser_edge_cases.py::TestMalformedMarkdown::test_missing_metadata_section PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnexpectedContent::test_extra_unexpected_sections PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnexpectedContent::test_nested_bullet_points PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnicodeHandling::test_unicode_in_headers PASSED [ 68%]
tests/test_parser_edge_cases.py::TestUnicodeHandling::test_unicode_in_content PASSED [ 69%]
tests/test_parser_edge_cases.py::TestLargeOutlines::test_very_large_outline_50_modules PASSED [ 69%]
tests/test_parser_edge_cases.py::TestEmptyAndInvalid::test_empty_module_name PASSED [ 69%]
tests/test_parser_edge_cases.py::TestEmptyAndInvalid::test_duplicate_module_ids PASSED [ 69%]
tests/test_parser_edge_cases.py::TestListFormatting::test_malformed_bullet_lists PASSED [ 69%]
tests/test_parser_edge_cases.py::TestListFormatting::test_mixed_list_styles PASSED [ 69%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_code_blocks_in_content PASSED [ 70%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_links_in_content PASSED [ 70%]
tests/test_parser_edge_cases.py::TestCodeAndSpecialBlocks::test_special_characters_escaping PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_excessive_blank_lines PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_mixed_line_endings PASSED [ 70%]
tests/test_parser_edge_cases.py::TestWhitespaceHandling::test_tabs_vs_spaces_indentation PASSED [ 70%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_empty_outline PASSED [ 70%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_whitespace_only_outline PASSED [ 71%]
tests/test_parser_edge_cases.py::TestBoundaryConditions::test_single_character_outline PASSED [ 71%]
tests/test_parser_edge_cases.py::TestContentExtraction::test_extract_subtopics_various_formats PASSED [ 71%]
tests/test_parser_edge_cases.py::TestContentExtraction::test_extract_with_inline_formatting PASSED [ 71%]
tests/test_parser_edge_cases.py::TestStructureValidation::test_modules_without_content PASSED [ 71%]
tests/test_parser_edge_cases.py::TestStructureValidation::test_content_before_first_module PASSED [ 71%]
tests/test_parser_edge_cases.py::TestRobustness::test_very_long_module_names PASSED [ 72%]
tests/test_parser_edge_cases.py::TestRobustness::test_special_unicode_ranges PASSED [ 72%]
tests/test_parser_edge_cases.py::TestRobustness::test_html_tags_in_markdown PASSED [ 72%]
tests/test_parser_edge_cases.py::TestErrorRecovery::test_recovery_from_malformed_section PASSED [ 72%]
tests/test_parser_edge_cases.py::TestErrorRecovery::test_mixed_valid_invalid_content PASSED [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_init PASSED           [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_setup_logging PASSED  [ 72%]
tests/test_pipeline.py::TestContentGenerator::test_get_output_directories PASSED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage1_generate_outline PASSED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_run_full_pipeline SKIPPED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_generate_content_multiple_modules SKIPPEDCheck logs for details.) [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_with_module_filtering SKIPPED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_content_structure SKIPPED [ 73%]
tests/test_pipeline.py::TestContentGenerator::test_stage2_with_invalid_outline PASSED [ 74%]
tests/test_pipeline.py::TestContentGenerator::test_pipeline_progress_tracking SKIPPED [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_multi_module_generation_all_succeed PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_empty_module_list PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineMultiModuleGeneration::test_very_large_module_count PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_json_outline_missing_file PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_json_outline_invalid_structure PASSED [ 74%]
tests/test_pipeline_extended.py::TestPipelineErrorHandling::test_corrupted_json_file PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineModuleFiltering::test_module_filtering_specific_ids PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineModuleFiltering::test_module_filtering_invalid_ids PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineOutputDiscovery::test_output_directory_discovery_priority PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineOutputDiscovery::test_no_outline_in_any_location PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_outline_with_no_sessions PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_module_with_many_sessions PASSED [ 75%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_outline_with_special_characters_in_names PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineEdgeCases::test_module_id_gaps PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineValidation::test_output_validation_structure PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineValidation::test_outline_metadata_validation PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineFileOperations::test_multiple_outlines_select_most_recent PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineFileOperations::test_outline_in_nested_directory PASSED [ 76%]
tests/test_pipeline_extended.py::TestPipelineDataIntegrity::test_module_data_preservation PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineDataIntegrity::test_unicode_in_module_names_and_content PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelinePerformance::test_large_outline_loading_performance PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelinePerformance::test_concurrent_outline_access PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineLogging::test_pipeline_logs_outline_discovery PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineNullHandling::test_module_with_null_fields PASSED [ 77%]
tests/test_pipeline_extended.py::TestPipelineNullHandling::test_explicit_none_path PASSED [ 77%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_full_pipeline_stage1_to_stage2 SKIPPED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_error_recovery SKIPPED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_module_filtering SKIPPED [ 78%]
tests/test_pipeline_integration.py::TestPipelineIntegration::test_pipeline_output_structure SKIPPED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_transient_error_detection PASSED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_resume_capability_skip_existing SKIPPED [ 78%]
tests/test_pipeline_recovery.py::TestPipelineRecovery::test_error_categorization PASSED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_retry_generation_helper SKIPPED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_retry_on_transient_failure PASSED [ 79%]
tests/test_pipeline_recovery.py::TestRetryMechanism::test_no_retry_on_permanent_failure PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_categorize_errors_by_type PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_format_error_list PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_format_error_list_max_items PASSED [ 79%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_validation_summary FAILED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_success FAILED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_with_issues PASSED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_generation_summary PASSED [ 80%]
tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_no_items FAILED [ 80%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_no_courses PASSED [ 80%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_with_courses PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_default PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_generate_all PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_invalid_input PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestCourseSelection::test_select_course_template_keyboard_interrupt PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_lecture PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_study_notes PASSED [ 81%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_questions PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_get_constraint_summary_generic PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_categorize_warnings PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_categorize_warnings_empty PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_no_warnings PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_questions PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_study_notes PASSED [ 82%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_generate_retry_feedback_lecture PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_valid PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_invalid_min_max PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_multiple_issues PASSED [ 83%]
tests/test_utilities_comprehensive.py::TestPromptHelpers::test_validate_constraint_consistency_specific_types PASSED [ 83%]
tests/test_utils.py::TestUtils::test_ensure_directory_creates_new PASSED [ 83%]
tests/test_utils.py::TestUtils::test_ensure_directory_existing PASSED    [ 84%]
tests/test_utils.py::TestUtils::test_slugify_simple PASSED               [ 84%]
tests/test_utils.py::TestUtils::test_slugify_special_chars PASSED        [ 84%]
tests/test_utils.py::TestUtils::test_slugify_multiple_spaces PASSED      [ 84%]
tests/test_utils.py::TestUtils::test_slugify_numbers PASSED              [ 84%]
tests/test_utils.py::TestUtils::test_save_and_load_markdown PASSED       [ 84%]
tests/test_utils.py::TestUtils::test_save_markdown_creates_dirs PASSED   [ 84%]
tests/test_utils.py::TestUtils::test_load_markdown_nonexistent PASSED    [ 85%]
tests/test_utils.py::TestUtils::test_format_timestamp PASSED             [ 85%]
tests/test_utils.py::TestUtils::test_format_timestamp_current PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_simple PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_special_chars PASSED [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_spaces PASSED     [ 85%]
tests/test_utils.py::TestUtils::test_sanitize_filename_preserves_extension PASSED [ 86%]
tests/test_utils.py::TestUtils::test_file_operation_permission_error PASSED [ 86%]
tests/test_utils.py::TestUtils::test_sanitize_path_traversal PASSED      [ 86%]
tests/test_utils.py::TestUtils::test_ensure_directory_race_condition PASSED [ 86%]
tests/test_utils.py::TestUtils::test_save_markdown_with_encoding PASSED  [ 86%]
tests/test_utils.py::TestUtils::test_slugify_very_long_strings PASSED    [ 86%]
tests/test_website_content_loader.py::TestContentLoader::test_get_content_types PASSED [ 86%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_valid_structure PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_missing_sessions PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_partial_content PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_nonexistent_directory PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_multiple_sessions PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_diagram_discovery PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_no_diagrams PASSED [ 87%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_secondary_types PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_visualization_is_mmd PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_valid_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_nonexistent_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_markdown_content_with_unicode PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_valid_file PASSED [ 88%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_nonexistent_file PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_load_mermaid_content_with_special_chars PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_sorted_sessions PASSED [ 89%]
tests/test_website_content_loader.py::TestContentLoader::test_scan_module_content_ignores_non_session_dirs PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_init_with_config_loader PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_with_custom_outline_and_output PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_auto_discovers_outline PASSED [ 89%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_raises_file_not_found_no_outline PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_raises_value_error_empty_modules PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_generate_handles_missing_content_files PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_content PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_missing_sessions PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_partial_content PASSED [ 90%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_diagrams PASSED [ 91%]
tests/test_website_generator.py::TestWebsiteGenerator::test_process_module_with_secondary_content PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_returns_string PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_modules_data PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_mermaid_init PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_highlight_init PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_search_functionality PASSED [ 91%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_dark_mode PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_progress_tracking PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_content_loading PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_toc_generation PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_breadcrumbs PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_includes_keyboard_navigation PASSED [ 92%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_handles_empty_modules PASSED [ 93%]
tests/test_website_scripts.py::TestScripts::test_get_javascript_handles_complex_modules PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_module_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_session_button_handler_present PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_event_delegation_uses_sidebar PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_handler_checks_first PASSED [ 93%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_event_propagation_stopped PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_validation PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_load_content_function_present PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_unified_event_handler_structure PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_button_target_checking PASSED [ 94%]
tests/test_website_scripts_interaction.py::TestScriptsInteraction::test_content_button_active_class_management PASSED [ 94%]
tests/test_website_styles.py::TestStyles::test_get_css_returns_string PASSED [ 94%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_css_variables PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_dark_mode PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_responsive_design PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_print_styles PASSED [ 95%]
tests/test_website_styles.py::TestStyles::test_get_css_contains_key_classes PASSED [ 95%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_basic PASSED [ 95%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_code_blocks PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_tables PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_lists PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_ordered_lists PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_graceful_fallback PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_standard_entities PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_quotes PASSED [ 96%]
tests/test_website_templates.py::TestTemplates::test_escape_html_empty_string PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_escape_html_special_characters PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_complete_structure PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_embedded_css PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_embedded_javascript PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_modules_serialization PASSED [ 97%]
tests/test_website_templates.py::TestTemplates::test_generate_html_course_metadata PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_html_with_timestamp PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_html_without_timestamp PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_single_module PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_multiple_modules PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_content_type_detection PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_hides_missing_content PASSED [ 98%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_diagram_buttons PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_secondary_content PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_navigation_html_aria_attributes PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_escape_html_preserves_text PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_headers PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_markdown_to_html_links PASSED [ 99%]
tests/test_website_templates.py::TestTemplates::test_generate_html_empty_modules PASSED [100%]

==================================== ERRORS ====================================
_ ERROR at setup of TestJSONExtraction.test_extract_json_from_markdown_code_block _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 24
      def test_extract_json_from_markdown_code_block(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_from_plain_code_block _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 38
      def test_extract_json_from_plain_code_block(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
___ ERROR at setup of TestJSONExtraction.test_extract_json_from_raw_response ___
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 49
      def test_extract_json_from_raw_response(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
___ ERROR at setup of TestJSONExtraction.test_extract_json_embedded_in_text ____
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 56
      def test_extract_json_embedded_in_text(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_with_nested_structure _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 67
      def test_extract_json_with_nested_structure(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_finds_largest_object __
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 97
      def test_extract_json_finds_largest_object(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_from_response_with_course_metadata_keyword _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 108
      def test_extract_json_from_response_with_course_metadata_keyword(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_from_response_with_modules_keyword _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 121
      def test_extract_json_from_response_with_modules_keyword(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_handles_multiple_objects _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 134
      def test_extract_json_handles_multiple_objects(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_returns_none_for_invalid_json _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 146
      def test_extract_json_returns_none_for_invalid_json(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_returns_none_for_malformed_json _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 152
      def test_extract_json_returns_none_for_malformed_json(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
__ ERROR at setup of TestJSONExtraction.test_extract_json_handles_whitespace ___
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 158
      def test_extract_json_handles_whitespace(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
_ ERROR at setup of TestJSONExtraction.test_extract_json_handles_newlines_in_strings _
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 174
      def test_extract_json_handles_newlines_in_strings(self, outline_generator):
file /Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py, line 16
      @pytest.fixture
      def outline_generator(self, test_config):
E       fixture 'test_config' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, benchmark, benchmark_weave, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, ensure_ollama_running, event_loop_policy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, ollama_available, outline_generator, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, skip_if_no_ollama, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/4d/Documents/GitHub/curriculum/tests/test_json_extraction.py:16
=================================== FAILURES ===================================
______ TestErrorCollectorEdgeCases.test_stage_summary_with_large_dataset _______
tests/test_error_collector_edge_cases.py:190: in test_stage_summary_with_large_dataset
    with caplog.at_level(logging.INFO, logging.WARNING):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/_pytest/logging.py:565: in at_level
    logger_obj = logging.getLogger(logger)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py:2138: in getLogger
    return Logger.manager.getLogger(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py:1375: in getLogger
    raise TypeError('A logger name must be a string')
E   TypeError: A logger name must be a string
__ TestErrorCollectorEdgeCases.test_validation_summary_with_mixed_severities ___
tests/test_error_collector_edge_cases.py:219: in test_validation_summary_with_mixed_severities
    with caplog.at_level(logging.INFO, logging.WARNING):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/_pytest/logging.py:565: in at_level
    logger_obj = logging.getLogger(logger)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py:2138: in getLogger
    return Logger.manager.getLogger(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.11/Frameworks/Python.framework/Versions/3.13/lib/python3.13/logging/__init__.py:1375: in getLogger
    raise TypeError('A logger name must be a string')
E   TypeError: A logger name must be a string
_______________ TestRequestIDTracing.test_request_id_generation ________________
tests/test_llm_client.py:402: in test_request_id_generation
    assert len(request_ids) >= 2
E   assert 0 >= 2
E    +  where 0 = len([])
------------------------------ Captured log call -------------------------------
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.llm.client:client.py:207 [req:0f7654]  req | m=gemma3:4b | p=9c
INFO     src.llm.client:client.py:244 [req:0f7654] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [req:0f7654] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [req:0f7654] Sending request to Ollama: model=gemma3:4b, operation=unknown, payload=113 bytes, prompt=9 chars
INFO     src.llm.client:client.py:283 [req:0f7654] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [req:0f7654]  Done 0.17s
INFO     src.llm.client:client.py:305 [req:0f7654]  HTTP 200 in 0.17s
INFO     src.llm.client:client.py:339 [req:0f7654]  Stream active (200)
INFO     src.llm.client:client.py:486 [req:0f7654] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [req:0f7654]  Done 0.35s: 43c (~9w @122c/s)
INFO     src.llm.client:client.py:207 [req:d8fff2]  req | m=gemma3:4b | p=11c
INFO     src.llm.client:client.py:244 [req:d8fff2] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [req:d8fff2] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [req:d8fff2] Sending request to Ollama: model=gemma3:4b, operation=unknown, payload=115 bytes, prompt=11 chars
INFO     src.llm.client:client.py:283 [req:d8fff2] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [req:d8fff2]  Done 0.16s
INFO     src.llm.client:client.py:305 [req:d8fff2]  HTTP 200 in 0.16s
INFO     src.llm.client:client.py:339 [req:d8fff2]  Stream active (200)
INFO     src.llm.client:client.py:486 [req:d8fff2] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [req:d8fff2]  Done 0.62s: 118c (~21w @191c/s)
______ TestStreamProgressLogging.test_progress_logging_during_long_stream ______
tests/test_llm_client.py:458: in test_progress_logging_during_long_stream
    assert len(progress_logs) > 0, "Should have progress logs for long generations"
E   AssertionError: Should have progress logs for long generations
E   assert 0 > 0
E    +  where 0 = len([])
------------------------------ Captured log call -------------------------------
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
INFO     src.llm.client:client.py:207 [req:26c4c6]  req | m=gemma3:4b | p=44c
INFO     src.llm.client:client.py:244 [req:26c4c6] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [req:26c4c6] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [req:26c4c6] Sending request to Ollama: model=gemma3:4b, operation=unknown, payload=150 bytes, prompt=44 chars
INFO     src.llm.client:client.py:283 [req:26c4c6] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [req:26c4c6]  Done 0.16s
INFO     src.llm.client:client.py:305 [req:26c4c6]  HTTP 200 in 0.16s
INFO     src.llm.client:client.py:339 [req:26c4c6]  Stream active (200)
INFO     src.llm.client:client.py:486 [req:26c4c6] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:638 [req:26c4c6]  2.0s: 642c @320c/s (144ch, ~160t @80t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  4.0s: 1288c @321c/s (288ch, ~322t @80t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  6.0s: 1989c @331c/s (432ch, ~497t @83t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  8.0s: 2606c @325c/s (576ch, ~652t @81t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  10.0s: 3239c @323c/s (719ch, ~810t @81t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  12.0s: 3918c @325c/s (861ch, ~980t @81t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  14.1s: 4614c @328c/s (1002ch, ~1154t @82t/s)
INFO     src.llm.client:client.py:638 [req:26c4c6]  16.1s: 5157c @321c/s (1141ch, ~1289t @80t/s)
INFO     src.llm.client:client.py:364 [req:26c4c6]  Done 16.75s: 5306c (~693w @317c/s)
__________________ TestOutlineGenerator.test_generate_outline __________________
tests/test_outline_generator.py:184: in test_generate_outline
    outline = generator.generate_outline(
src/generate/stages/stage1_outline.py:648: in generate_outline
    raise ValueError("Generated outline JSON failed validation. Check logs for details.")
E   ValueError: Generated outline JSON failed validation. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 06:42:39,115 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-28/test_generate_outline0/config
2025-12-16 06:42:39,118 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-28/test_generate_outline0/config
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:42:40,137 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 06:42:40,138 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,138 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:40,138 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,140 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:40,141 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:40,142 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:40,143 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:40,143 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:40,143 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:40,143 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:40,145 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:40,145 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:40,159 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:40,159 - src.llm.client - INFO - [out:50f580]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:40,159 - src.llm.client - INFO - [out:50f580] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:40,159 - src.llm.client - INFO - [out:50f580] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:40,162 - src.llm.client - INFO - [out:50f580] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:40,162 - src.llm.client - INFO - [out:50f580] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:40,921 - src.llm.request_handler - INFO - [out:50f580]  Done 0.76s
2025-12-16 06:42:40,921 - src.llm.client - INFO - [out:50f580]  HTTP 200 in 0.76s
2025-12-16 06:42:40,921 - src.llm.client - INFO - [out:50f580]  Stream active (200)
2025-12-16 06:42:40,921 - src.llm.client - INFO - [out:50f580] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:40,975 - src.llm.client - INFO - [out:50f580]  Done 0.82s: 2c (~1w @2c/s)
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 2 characters)
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - Generation took 0.82 seconds
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - Generation rate: 2.5 chars/s
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - Generation performance: 0.82s (within expected range)
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:40,975 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:40,976 - tests.test_outline_generator - WARNING - Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:40,976 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:40,977 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:40,978 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:40,980 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:40,980 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:40,993 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:40,993 - src.llm.client - INFO - [out:049faf]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:40,993 - src.llm.client - INFO - [out:049faf] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:40,993 - src.llm.client - INFO - [out:049faf] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:40,996 - src.llm.client - INFO - [out:049faf] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:40,996 - src.llm.client - INFO - [out:049faf] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:41,238 - src.llm.request_handler - INFO - [out:049faf]  Done 0.24s
2025-12-16 06:42:41,238 - src.llm.client - INFO - [out:049faf]  HTTP 200 in 0.24s
2025-12-16 06:42:41,238 - src.llm.client - INFO - [out:049faf]  Stream active (200)
2025-12-16 06:42:41,238 - src.llm.client - INFO - [out:049faf] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:41,297 - src.llm.client - INFO - [out:049faf]  Done 0.30s: 2c (~1w @7c/s)
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 2 characters)
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Generation took 0.30 seconds
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Generation rate: 6.6 chars/s
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Generation performance: 0.30s (within expected range)
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:41,298 - tests.test_outline_generator - WARNING - Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:41,298 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:41,299 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:41,300 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:41,301 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:41,301 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:41,301 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:41,301 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:41,301 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:41,302 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:41,302 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:41,315 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:41,316 - src.llm.client - INFO - [out:44ac41]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:41,316 - src.llm.client - INFO - [out:44ac41] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:41,316 - src.llm.client - INFO - [out:44ac41] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:41,318 - src.llm.client - INFO - [out:44ac41] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:41,318 - src.llm.client - INFO - [out:44ac41] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:41,586 - src.llm.request_handler - INFO - [out:44ac41]  Done 0.27s
2025-12-16 06:42:41,586 - src.llm.client - INFO - [out:44ac41]  HTTP 200 in 0.27s
2025-12-16 06:42:41,586 - src.llm.client - INFO - [out:44ac41]  Stream active (200)
2025-12-16 06:42:41,586 - src.llm.client - INFO - [out:44ac41] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:42,395 - src.llm.client - INFO - [out:44ac41]  Done 1.08s: 137c (~14w @127c/s)
2025-12-16 06:42:42,395 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:42:42,395 - src.generate.stages.stage1_outline - INFO - Generation took 1.08 seconds
2025-12-16 06:42:42,395 - src.generate.stages.stage1_outline - INFO - Generation rate: 126.9 chars/s
2025-12-16 06:42:42,395 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.08s (within expected range)
2025-12-16 06:42:42,395 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:42,396 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:42,396 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:42,396 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:42,396 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:42,396 - tests.test_outline_generator - ERROR - Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
------------------------------ Captured log call -------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:50f580]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:50f580] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:50f580] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:50f580] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:50f580] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:50f580]  Done 0.76s
INFO     src.llm.client:client.py:305 [out:50f580]  HTTP 200 in 0.76s
INFO     src.llm.client:client.py:339 [out:50f580]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:50f580] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:50f580]  Done 0.82s: 2c (~1w @2c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 2 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 0.82 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 2.5 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 0.82s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:235 Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:049faf]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:049faf] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:049faf] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:049faf] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:049faf] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:049faf]  Done 0.24s
INFO     src.llm.client:client.py:305 [out:049faf]  HTTP 200 in 0.24s
INFO     src.llm.client:client.py:339 [out:049faf]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:049faf] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:049faf]  Done 0.30s: 2c (~1w @7c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 2 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 0.30 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 6.6 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 0.30s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:235 Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:44ac41]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:44ac41] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:44ac41] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:44ac41] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:44ac41] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:44ac41]  Done 0.27s
INFO     src.llm.client:client.py:305 [out:44ac41]  HTTP 200 in 0.27s
INFO     src.llm.client:client.py:339 [out:44ac41]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:44ac41] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:44ac41]  Done 1.08s: 137c (~14w @127c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.08 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 126.9 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.08s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
ERROR    tests.test_outline_generator:test_outline_generator.py:231 Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
_____________ TestOutlineGenerator.test_generate_and_save_outline ______________
tests/test_outline_generator.py:281: in test_generate_and_save_outline
    outline = generator.generate_outline(
src/generate/stages/stage1_outline.py:648: in generate_outline
    raise ValueError("Generated outline JSON failed validation. Check logs for details.")
E   ValueError: Generated outline JSON failed validation. Check logs for details.
---------------------------- Captured stdout setup -----------------------------
2025-12-16 06:42:42,431 - src.config.loader - INFO - Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-28/test_generate_and_save_outline0/config
2025-12-16 06:42:42,433 - src.llm.client - INFO - Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
------------------------------ Captured log setup ------------------------------
INFO     src.config.loader:loader.py:50 Initialized ConfigLoader with directory: /private/var/folders/vc/rgmbpjpj0dbg61vr54xjskc80000gn/T/pytest-of-4d/pytest-28/test_generate_and_save_outline0/config
INFO     src.llm.client:client.py:92 Initialized OllamaClient: model=gemma3:4b, url=http://localhost:11434/api/generate
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:42:43,722 - src.generate.stages.stage1_outline - INFO - Initialized OutlineGenerator
2025-12-16 06:42:43,723 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,723 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:43,723 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,725 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:43,726 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:43,727 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:43,728 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:43,728 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:43,728 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:43,728 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:43,728 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:43,730 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:43,730 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:43,743 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:43,744 - src.llm.client - INFO - [out:f9b8bc]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:43,744 - src.llm.client - INFO - [out:f9b8bc] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:43,744 - src.llm.client - INFO - [out:f9b8bc] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:43,746 - src.llm.client - INFO - [out:f9b8bc] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:43,746 - src.llm.client - INFO - [out:f9b8bc] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:44,500 - src.llm.request_handler - INFO - [out:f9b8bc]  Done 0.75s
2025-12-16 06:42:44,500 - src.llm.client - INFO - [out:f9b8bc]  HTTP 200 in 0.75s
2025-12-16 06:42:44,500 - src.llm.client - INFO - [out:f9b8bc]  Stream active (200)
2025-12-16 06:42:44,501 - src.llm.client - INFO - [out:f9b8bc] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:45,305 - src.llm.client - INFO - [out:f9b8bc]  Done 1.56s: 137c (~14w @88c/s)
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Generation took 1.56 seconds
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Generation rate: 87.7 chars/s
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.56s (within expected range)
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:45,306 - tests.test_outline_generator - WARNING - Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:45,306 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:45,307 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:45,308 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:45,309 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:45,310 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:45,310 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:45,323 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:45,323 - src.llm.client - INFO - [out:6cf17a]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:45,323 - src.llm.client - INFO - [out:6cf17a] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:45,324 - src.llm.client - INFO - [out:6cf17a] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:45,326 - src.llm.client - INFO - [out:6cf17a] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:45,326 - src.llm.client - INFO - [out:6cf17a] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:45,556 - src.llm.request_handler - INFO - [out:6cf17a]  Done 0.23s
2025-12-16 06:42:45,556 - src.llm.client - INFO - [out:6cf17a]  HTTP 200 in 0.23s
2025-12-16 06:42:45,556 - src.llm.client - INFO - [out:6cf17a]  Stream active (200)
2025-12-16 06:42:45,556 - src.llm.client - INFO - [out:6cf17a] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:46,361 - src.llm.client - INFO - [out:6cf17a]  Done 1.04s: 137c (~14w @132c/s)
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - Generation took 1.04 seconds
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - Generation rate: 132.0 chars/s
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.04s (within expected range)
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:46,361 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:46,362 - tests.test_outline_generator - WARNING - Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Course Title: 'Test Biology'
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Course Level: 'Intro'
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Duration: 4 weeks
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Description: 11 characters
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Modules to Generate: 2
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Topic Areas: LLM will generate based on course description and constraints
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Additional Constraints: Test constraints...
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - SESSION/MODULE CONFIGURATION
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Modules: 2
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Total Sessions: 4
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - Average: 2.00 sessions per module
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO -  Balanced distribution
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - OUTLINE GENERATION ITEM BOUNDS
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO -    Subtopics per session: 3-7
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO -    Learning objectives per session: 3-7
2025-12-16 06:42:46,362 - src.generate.stages.stage1_outline - INFO -    Key concepts per session: 3-7
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - LLM GENERATION PARAMETERS
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - Model Configuration:
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    Model: gemma3:4b
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    Format: JSON structured
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO - Template Variables (16 provided):
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    additional_constraints  : "Test constraints"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    avg_sessions_per_module : "2.0"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    course_description      : "Test course"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    course_duration         : 4
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    course_level            : "Intro"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    course_name             : "Test Biology"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    language                : "English"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    max_concepts            : 7
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    max_objectives          : 7
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    max_subtopics           : 7
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    min_concepts            : 3
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    min_objectives          : 3
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    min_subtopics           : 3
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    num_modules             : 2
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    subject                 : "general education"
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -    total_sessions          : 4
2025-12-16 06:42:46,363 - src.generate.stages.stage1_outline - INFO -
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Template Validation:
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO -    All 9 required variables provided
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -     Extra 7 variables provided (will be ignored):
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - language
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - max_concepts
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - max_objectives
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - max_subtopics
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - min_concepts
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - min_objectives
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - WARNING -       - min_subtopics
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - 
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Sending JSON generation request to LLM...
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Requesting structured outline for: 'Test Biology'
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Generating 2 modules with 4 total sessions
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Formatted prompt size: 1591 characters
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - System prompt size: 59 characters
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Template variables: 16 variables provided
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - LLM model: gemma3:4b
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - LLM timeout: 60s
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - LLM API URL: http://localhost:11434/api/generate
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
2025-12-16 06:42:46,364 - src.generate.stages.stage1_outline - INFO - Checking Ollama service connection and performance...
2025-12-16 06:42:46,366 - src.generate.stages.stage1_outline - INFO - Ollama connection check successful (response time: 0.002s)
2025-12-16 06:42:46,366 - src.generate.stages.stage1_outline - INFO - Checking GPU acceleration status...
2025-12-16 06:42:46,378 - src.generate.stages.stage1_outline - INFO - GPU acceleration active: 100% GPU
2025-12-16 06:42:46,379 - src.llm.client - INFO - [out:fb561e]  out | m=gemma3:4b | p=1591c | t=60s
2025-12-16 06:42:46,379 - src.llm.client - INFO - [out:fb561e] Timeout configuration: connect=5s, read=60s (total limit: 60s)
2025-12-16 06:42:46,379 - src.llm.client - INFO - [out:fb561e] Pre-flight check: Verifying Ollama service is reachable...
2025-12-16 06:42:46,381 - src.llm.client - INFO - [out:fb561e] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
2025-12-16 06:42:46,381 - src.llm.client - INFO - [out:fb561e] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
2025-12-16 06:42:46,612 - src.llm.request_handler - INFO - [out:fb561e]  Done 0.23s
2025-12-16 06:42:46,612 - src.llm.client - INFO - [out:fb561e]  HTTP 200 in 0.23s
2025-12-16 06:42:46,612 - src.llm.client - INFO - [out:fb561e]  Stream active (200)
2025-12-16 06:42:46,612 - src.llm.client - INFO - [out:fb561e] Starting stream parsing, waiting for first chunk...
2025-12-16 06:42:47,422 - src.llm.client - INFO - [out:fb561e]  Done 1.04s: 137c (~14w @131c/s)
2025-12-16 06:42:47,422 - src.generate.stages.stage1_outline - INFO - LLM generation completed (received 137 characters)
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - Generation took 1.04 seconds
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - Generation rate: 131.2 chars/s
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - Generation performance: 1.04s (within expected range)
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - --------------------------------------------------------------------------------
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - Parsing JSON response...
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - JSON parsed successfully
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - INFO - Validating outline structure...
2025-12-16 06:42:47,423 - src.generate.stages.stage1_outline - ERROR - Missing required top-level keys: course_metadata or modules
2025-12-16 06:42:47,423 - tests.test_outline_generator - ERROR - Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
------------------------------ Captured log call -------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:57 Initialized OutlineGenerator
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:f9b8bc]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:f9b8bc] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:f9b8bc] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:f9b8bc] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:f9b8bc] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:f9b8bc]  Done 0.75s
INFO     src.llm.client:client.py:305 [out:f9b8bc]  HTTP 200 in 0.75s
INFO     src.llm.client:client.py:339 [out:f9b8bc]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:f9b8bc] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:f9b8bc]  Done 1.56s: 137c (~14w @88c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.56 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 87.7 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.56s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:303 Attempt 1/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:6cf17a]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:6cf17a] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:6cf17a] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:6cf17a] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:6cf17a] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:6cf17a]  Done 0.23s
INFO     src.llm.client:client.py:305 [out:6cf17a]  HTTP 200 in 0.23s
INFO     src.llm.client:client.py:339 [out:6cf17a]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:6cf17a] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:6cf17a]  Done 1.04s: 137c (~14w @132c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.04 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 132.0 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.04s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
WARNING  tests.test_outline_generator:test_outline_generator.py:303 Attempt 2/3 failed, retrying... Error: Generated outline JSON failed validation. Check logs for details.
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION PROCESS (JSON-STRUCTURED)
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:386 Course Title: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:387 Course Level: 'Intro'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:389 Duration: 4 weeks
INFO     src.generate.stages.stage1_outline:stage1_outline.py:390 Description: 11 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:391 Modules to Generate: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:392 Topic Areas: LLM will generate based on course description and constraints
INFO     src.generate.stages.stage1_outline:stage1_outline.py:395 Additional Constraints: Test constraints...
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 SESSION/MODULE CONFIGURATION
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:414 Modules: 2
INFO     src.generate.stages.stage1_outline:stage1_outline.py:415 Total Sessions: 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:416 Average: 2.00 sessions per module
INFO     src.generate.stages.stage1_outline:stage1_outline.py:424  Balanced distribution
INFO     src.generate.stages.stage1_outline:stage1_outline.py:426 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 OUTLINE GENERATION ITEM BOUNDS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:451    Subtopics per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:452    Learning objectives per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:453    Key concepts per session: 3-7
INFO     src.generate.stages.stage1_outline:stage1_outline.py:454 
INFO     src.generate.stages.stage1_outline:logging_setup.py:109 
INFO     src.generate.stages.stage1_outline:logging_setup.py:110 LLM GENERATION PARAMETERS
INFO     src.generate.stages.stage1_outline:logging_setup.py:111 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:485 Model Configuration:
INFO     src.generate.stages.stage1_outline:stage1_outline.py:486    Model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:487    Format: JSON structured
INFO     src.generate.stages.stage1_outline:stage1_outline.py:488    Prompt: 'You are an expert biology educator. Output ONLY valid JSON....'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:489
INFO     src.generate.stages.stage1_outline:logging_setup.py:176 Template Variables (16 provided):
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    additional_constraints  : "Test constraints"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    avg_sessions_per_module : "2.0"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_description      : "Test course"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_duration         : 4
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_level            : "Intro"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    course_name             : "Test Biology"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    language                : "English"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_concepts            : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_objectives          : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    max_subtopics           : 7
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_concepts            : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_objectives          : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    min_subtopics           : 3
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    num_modules             : 2
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    subject                 : "general education"
INFO     src.generate.stages.stage1_outline:logging_setup.py:199    total_sessions          : 4
INFO     src.generate.stages.stage1_outline:stage1_outline.py:498
INFO     src.generate.stages.stage1_outline:logging_setup.py:218 Template Validation:
INFO     src.generate.stages.stage1_outline:logging_setup.py:230    All 9 required variables provided
WARNING  src.generate.stages.stage1_outline:logging_setup.py:233     Extra 7 variables provided (will be ignored):
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - language
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - max_subtopics
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_concepts
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_objectives
WARNING  src.generate.stages.stage1_outline:logging_setup.py:235       - min_subtopics
INFO     src.generate.stages.stage1_outline:stage1_outline.py:501 
INFO     src.generate.stages.stage1_outline:stage1_outline.py:504 Sending JSON generation request to LLM...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:505 Requesting structured outline for: 'Test Biology'
INFO     src.generate.stages.stage1_outline:stage1_outline.py:506 Generating 2 modules with 4 total sessions
INFO     src.generate.stages.stage1_outline:stage1_outline.py:510 Formatted prompt size: 1591 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:511 System prompt size: 59 characters
INFO     src.generate.stages.stage1_outline:stage1_outline.py:512 Template variables: 16 variables provided
INFO     src.generate.stages.stage1_outline:stage1_outline.py:516 LLM model: gemma3:4b
INFO     src.generate.stages.stage1_outline:stage1_outline.py:524 LLM timeout: 60s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:525 LLM API URL: http://localhost:11434/api/generate
INFO     src.generate.stages.stage1_outline:stage1_outline.py:535 Using optimized parameters for outline generation: num_ctx=32000, num_predict=4000 (reduced from default 128K/64K for faster generation)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:538 Checking Ollama service connection and performance...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:558 Ollama connection check successful (response time: 0.002s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:561 Checking GPU acceleration status...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:565 GPU acceleration active: 100% GPU
INFO     src.llm.client:client.py:207 [out:fb561e]  out | m=gemma3:4b | p=1591c | t=60s
INFO     src.llm.client:client.py:244 [out:fb561e] Timeout configuration: connect=5s, read=60s (total limit: 60s)
INFO     src.llm.client:client.py:255 [out:fb561e] Pre-flight check: Verifying Ollama service is reachable...
INFO     src.llm.client:client.py:276 [out:fb561e] Sending request to Ollama: model=gemma3:4b, operation=outline, payload=1898 bytes, prompt=1591 chars
INFO     src.llm.client:client.py:283 [out:fb561e] Waiting for HTTP response (connect timeout: 5s, read timeout: 60s)...
INFO     src.llm.request_handler:request_handler.py:108 [out:fb561e]  Done 0.23s
INFO     src.llm.client:client.py:305 [out:fb561e]  HTTP 200 in 0.23s
INFO     src.llm.client:client.py:339 [out:fb561e]  Stream active (200)
INFO     src.llm.client:client.py:486 [out:fb561e] Starting stream parsing, waiting for first chunk...
INFO     src.llm.client:client.py:364 [out:fb561e]  Done 1.04s: 137c (~14w @131c/s)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:590 LLM generation completed (received 137 characters)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:591 Generation took 1.04 seconds
INFO     src.generate.stages.stage1_outline:stage1_outline.py:595 Generation rate: 131.2 chars/s
INFO     src.generate.stages.stage1_outline:stage1_outline.py:609 Generation performance: 1.04s (within expected range)
INFO     src.generate.stages.stage1_outline:stage1_outline.py:634 --------------------------------------------------------------------------------
INFO     src.generate.stages.stage1_outline:stage1_outline.py:635 Parsing JSON response...
INFO     src.generate.stages.stage1_outline:stage1_outline.py:643 JSON parsed successfully
INFO     src.generate.stages.stage1_outline:stage1_outline.py:646 Validating outline structure...
ERROR    src.generate.stages.stage1_outline:stage1_outline.py:181 Missing required top-level keys: course_metadata or modules
ERROR    tests.test_outline_generator:test_outline_generator.py:299 Failed to generate valid outline after 3 attempts: Generated outline JSON failed validation. Check logs for details.
____________ TestSummaryGenerator.test_generate_validation_summary _____________
tests/test_summary_generator.py:95: in test_generate_validation_summary
    assert "[VALIDATION SUMMARY]" in all_log_text
E   AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Critical: Missing question marks\n'
----------------------------- Captured stdout call -----------------------------
2025-12-16 06:46:23,962 - test - WARNING -     1. Critical: Missing question marks
------------------------------ Captured log call -------------------------------
WARNING  test:summary_generator.py:115     1. Critical: Missing question marks
___________ TestSummaryGenerator.test_generate_stage_summary_success ___________
tests/test_summary_generator.py:121: in test_generate_stage_summary_success
    assert "Test Stage - Summary" in all_log_text
E   AssertionError: assert 'Test Stage - Summary' in ''
__________ TestSummaryGenerator.test_generate_stage_summary_no_items ___________
tests/test_summary_generator.py:209: in test_generate_stage_summary_no_items
    assert "Test Stage - Summary" in all_log_text
E   AssertionError: assert 'Test Stage - Summary' in ''
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.13.11-final-0 _______________

Name                                           Stmts   Miss  Cover   Missing
----------------------------------------------------------------------------
src/config/loader.py                             394     91    77%   123-125, 147-164, 183-185, 258, 345-346, 353-362, 374-375, 404-405, 414-415, 439-441, 498-500, 630-632, 664, 692-694, 736-738, 841-850, 864, 884, 890, 895, 914, 920, 926, 936, 943, 949, 956, 975-980, 983-989, 999-1017
src/generate/formats/diagrams.py                 134     33    75%   98-135, 191-193, 199-201, 220, 267-270
src/generate/formats/labs.py                      85      9    89%   110-118, 187-192
src/generate/formats/lectures.py                 117     38    68%   110-116, 144-181, 261-265
src/generate/formats/questions.py                156     41    74%   47-48, 51, 129-170, 236-238, 257, 310-328
src/generate/formats/study_notes.py              118     51    57%   89, 100-102, 111-170, 246-251, 263-270
src/generate/orchestration/batch.py              212     53    75%   88-89, 104, 107-108, 113-114, 118, 140, 148-162, 165-169, 239-245, 249-252, 307-308, 357-358, 360-361, 363-364, 366-367, 391-395, 453
src/generate/orchestration/pipeline.py           410    309    25%   128, 181-185, 196, 230-231, 251-280, 299-304, 346-364, 407-823, 840-874
src/generate/processors/cleanup.py               150     15    90%   225-227, 233-234, 238-240, 244-246, 265, 347-350
src/generate/processors/parser.py                105      3    97%   91, 167-168
src/generate/stages/outline_quality.py           172     30    83%   101, 106, 114, 118-120, 170, 184-187, 213, 260, 274, 288, 336-338, 348-350, 375-377, 394-399, 441, 449, 465
src/generate/stages/stage1_outline.py            489     97    80%   78-79, 104-105, 111-112, 119-132, 176-177, 226-227, 231-232, 236-237, 382-383, 401-402, 406-410, 419-420, 422, 438, 522, 541-548, 552, 567-573, 599, 605, 611-631, 639-641, 657-660, 682, 712-713, 715-716, 724, 728, 744, 838-852, 902-910, 944-945, 960-985
src/llm/client.py                                400    123    69%   133, 268, 320, 371-386, 389-412, 424-428, 532-547, 558-559, 575, 577, 579, 593, 614-620, 623-629, 660-675, 688-708, 719-737, 757-785, 800-817, 825-838, 902-909, 923-924, 928-929, 955-959
src/llm/health.py                                102     21    79%   64-66, 133-135, 168-169, 195, 200-204, 226-230, 256-262, 266-269, 291-300
src/llm/request_handler.py                        85     13    85%   123-124, 143-149, 182, 192, 231, 236-240
src/utils/content_analysis/analyzers.py          459     75    84%   365, 533, 557-558, 565-567, 570-571, 628, 652-653, 660-662, 665-666, 801-802, 869-870, 937-938, 987-993, 997-1011, 1085-1086, 1112-1116, 1123-1130, 1142, 1146, 1166-1210
src/utils/content_analysis/consistency.py         93     84    10%   24-40, 52-116, 139-188, 208-225
src/utils/content_analysis/logging.py            136     71    48%   56-83, 98-109, 112-123, 140-145, 161-195
src/utils/content_analysis/mermaid.py            119      7    94%   145, 180-182, 184-186
src/utils/content_analysis/question_fixes.py      73     17    77%   47, 55, 59, 101-119, 155-156
src/utils/error_collector.py                     149     68    54%   327-356, 376-422, 433-468, 481-531
src/utils/helpers.py                             122     29    76%   173-174, 188-191, 224-228, 240-243, 252-253, 272, 282, 314, 319-326, 342-345
src/utils/logging_setup.py                       166     52    69%   192, 196, 290, 312-313, 342, 364-408, 421-429, 452-455, 484-485
src/utils/prompt_helpers.py                       93      6    94%   87, 116, 125, 182, 196-197
src/utils/smart_retry.py                         152     62    59%   160-161, 171-178, 205-206, 230-243, 263-307, 318-320, 332-338
src/utils/summary_generator.py                   167     18    89%   117, 150-152, 187, 192, 197-199, 230, 239-240, 267-272, 307
src/website/content_loader.py                     56      5    91%   76, 133-134, 157-158
src/website/generator.py                          78      3    96%   172-177
src/website/templates.py                          77      4    95%   35-38, 244
----------------------------------------------------------------------------
TOTAL                                           5174   1428    72%

16 files skipped due to complete coverage.
Coverage HTML written to dir htmlcov
============================= slowest 10 durations =============================
150.54s call     tests/test_pipeline.py::TestContentGenerator::test_stage2_generate_content_multiple_modules
37.07s call     tests/test_new_generators.py::TestLabGenerator::test_generate_multiple_labs
20.99s call     tests/test_new_generators.py::TestStudyNotesGenerator::test_generate_study_notes
16.94s call     tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_stream_progress_monitoring
16.75s call     tests/test_llm_client.py::TestStreamProgressLogging::test_progress_logging_during_long_stream
16.47s call     tests/test_llm_client.py::TestStreamingIssues::test_stream_progress_logging
16.21s call     tests/test_new_generators.py::TestLabGenerator::test_generate_lab
15.66s call     tests/test_llm_client_timeouts.py::TestTimeoutHandling::test_adaptive_timeout_extension_on_progress
14.60s call     tests/test_format_generators_comprehensive.py::TestFormatGeneratorErrorHandling::test_lecture_generator_empty_module_info
13.89s call     tests/test_format_generators_comprehensive.py::TestFormatGeneratorValidation::test_lecture_generator_retry_on_validation_failure
=========================== short test summary info ============================
FAILED tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_stage_summary_with_large_dataset - TypeError: A logger name must be a string
FAILED tests/test_error_collector_edge_cases.py::TestErrorCollectorEdgeCases::test_validation_summary_with_mixed_severities - TypeError: A logger name must be a string
FAILED tests/test_llm_client.py::TestRequestIDTracing::test_request_id_generation - assert 0 >= 2
 +  where 0 = len([])
FAILED tests/test_llm_client.py::TestStreamProgressLogging::test_progress_logging_during_long_stream - AssertionError: Should have progress logs for long generations
assert 0 > 0
 +  where 0 = len([])
FAILED tests/test_outline_generator.py::TestOutlineGenerator::test_generate_outline - ValueError: Generated outline JSON failed validation. Check logs for details.
FAILED tests/test_outline_generator.py::TestOutlineGenerator::test_generate_and_save_outline - ValueError: Generated outline JSON failed validation. Check logs for details.
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_validation_summary - AssertionError: assert '[VALIDATION SUMMARY]' in 'WARNING  test:summary_generator.py:115     1. Critical: Missing question marks\n'
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_success - AssertionError: assert 'Test Stage - Summary' in ''
FAILED tests/test_summary_generator.py::TestSummaryGenerator::test_generate_stage_summary_no_items - AssertionError: assert 'Test Stage - Summary' in ''
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_markdown_code_block
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_plain_code_block
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_raw_response
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_embedded_in_text
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_with_nested_structure
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_finds_largest_object
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_course_metadata_keyword
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_from_response_with_modules_keyword
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_multiple_objects
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_invalid_json
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_returns_none_for_malformed_json
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_whitespace
ERROR tests/test_json_extraction.py::TestJSONExtraction::test_extract_json_handles_newlines_in_strings
======= 9 failed, 625 passed, 11 skipped, 13 errors in 574.06s (0:09:34) =======